/* kdocker-web v0.1.13-5 2014-07-20
 * http://tsaikd.github.io/kdocker-web/
 * License: LGPLv3
 */
!function(a,b,c,d,e,f,g){a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d,g.parentNode.insertBefore(f,g)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-151772-8","tsaikd.org"),ga("require","displayfeatures"),ga("require","linkid","linkid.js"),ga("send","pageview"),function(a,b,c){"use strict";b.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){var a="$$ngAnimateChildren";return function(c,d,e){var f=e.ngAnimateChildren;b.isString(f)&&0===f.length?d.data(a,!0):c.$watch(f,function(b){d.data(a,!!b)})}}).factory("$$animateReflow",["$$rAF","$document",function(a,b){var c=b[0].body;return function(b){return a(function(){c.offsetWidth+1;b()})}}]).config(["$provide","$animateProvider",function(d,e){function f(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.nodeType==m)return c}}function g(a){return a&&b.element(a)}function h(a){return b.element(f(a))}function i(a,b){return f(a)==f(b)}var j=b.noop,k=b.forEach,l=e.$$selectors,m=1,n="$$ngAnimateState",o="$$ngAnimateChildren",p="ng-animate",q={running:!0};d.decorator("$animate",["$delegate","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document",function(a,c,d,m,r,s){function t(a){var b=a.data(n)||{};b.running=!0,a.data(n,b)}function u(a){if(a){var b=[],e={},f=a.substr(1).split(".");(d.transitions||d.animations)&&b.push(c.get(l[""]));for(var g=0;g<f.length;g++){var h=f[g],i=l[h];i&&!e[h]&&(b.push(c.get(i)),e[h]=!0)}return b}}function v(a,c,d){function e(a,b){var c=a[b],d=a["before"+b.charAt(0).toUpperCase()+b.substr(1)];return c||d?("leave"==b&&(d=c,c=null),v.push({event:b,fn:c}),r.push({event:b,fn:d}),!0):void 0}function f(b,c,e){function f(a){if(c){if((c[a]||j)(),++l<g.length)return;c=null}e()}var g=[];k(b,function(a){a.fn&&g.push(a)});var l=0;k(g,function(b,e){var g=function(){f(e)};switch(b.event){case"setClass":c.push(b.fn(a,h,i,g));break;case"addClass":c.push(b.fn(a,h||d,g));break;case"removeClass":c.push(b.fn(a,i||d,g));break;default:c.push(b.fn(a,g))}}),c&&0===c.length&&e()}var g=a[0];if(g){var h,i,l="setClass"==c,m=l||"addClass"==c||"removeClass"==c;b.isArray(d)&&(h=d[0],i=d[1],d=h+" "+i);var n=a.attr("class"),o=n+" "+d;if(C(o)){var p=j,q=[],r=[],s=j,t=[],v=[],w=(" "+o).replace(/\s+/g,".");return k(u(w),function(a){var b=e(a,c);!b&&l&&(e(a,"addClass"),e(a,"removeClass"))}),{node:g,event:c,className:d,isClassBased:m,isSetClassOperation:l,before:function(a){p=a,f(r,q,function(){p=j,a()})},after:function(a){s=a,f(v,t,function(){s=j,a()})},cancel:function(){q&&(k(q,function(a){(a||j)(!0)}),p(!0)),t&&(k(t,function(a){(a||j)(!0)}),s(!0))}}}}}function w(a,c,d,e,f,g,h){function i(b){var e="$animate:"+b;t&&t[e]&&t[e].length>0&&r(function(){d.triggerHandler(e,{event:a,className:c})})}function j(){i("before")}function l(){i("after")}function m(){i("close"),h&&r(function(){h()})}function o(){o.hasBeenRun||(o.hasBeenRun=!0,g())}function q(){if(!q.hasBeenRun){q.hasBeenRun=!0;var b=d.data(n);b&&(s&&s.isClassBased?y(d,c):(r(function(){var b=d.data(n)||{};H==b.index&&y(d,c,a)}),d.data(n,b))),m()}}var s=v(d,a,c);if(!s)return o(),j(),l(),void q();c=s.className;var t=b.element._data(s.node);t=t&&t.events,e||(e=f?f.parent():d.parent());var u,w=d.data(n)||{},x=w.active||{},B=w.totalActive||0,C=w.last;if(s.isClassBased&&(u=w.running||w.disabled||C&&!C.isClassBased),u||z(d,e))return o(),j(),l(),void q();var D=!1;if(B>0){var E=[];if(s.isClassBased){if("setClass"==C.event)E.push(C),y(d,c);else if(x[c]){var F=x[c];F.event==a?D=!0:(E.push(F),y(d,c))}}else if("leave"==a&&x["ng-leave"])D=!0;else{for(var G in x)E.push(x[G]),y(d,G);x={},B=0}E.length>0&&k(E,function(a){a.cancel()})}if(!s.isClassBased||s.isSetClassOperation||D||(D="addClass"==a==d.hasClass(c)),D)return o(),j(),l(),void m();"leave"==a&&d.one("$destroy",function(){var a=b.element(this),c=a.data(n);if(c){var d=c.active["ng-leave"];d&&(d.cancel(),y(a,"ng-leave"))}}),d.addClass(p);var H=A++;B++,x[c]=s,d.data(n,{last:s,active:x,index:H,totalActive:B}),j(),s.before(function(b){var e=d.data(n);b=b||!e||!e.active[c]||s.isClassBased&&e.active[c].event!=a,o(),b===!0?q():(l(),s.after(q))})}function x(a){var c=f(a);if(c){var d=b.isFunction(c.getElementsByClassName)?c.getElementsByClassName(p):c.querySelectorAll("."+p);k(d,function(a){a=b.element(a);var c=a.data(n);c&&c.active&&k(c.active,function(a){a.cancel()})})}}function y(a,b){if(i(a,m))q.disabled||(q.running=!1,q.structural=!1);else if(b){var c=a.data(n)||{},d=b===!0;!d&&c.active&&c.active[b]&&(c.totalActive--,delete c.active[b]),(d||!c.totalActive)&&(a.removeClass(p),a.removeData(n))}}function z(a,c){if(q.disabled)return!0;if(i(a,m))return q.running;var d,e,f;do{if(0===c.length)break;var g=i(c,m),h=g?q:c.data(n)||{};if(h.disabled)return!0;if(g&&(f=!0),d!==!1){var j=c.data(o);b.isDefined(j)&&(d=j)}e=e||h.running||h.last&&!h.last.isClassBased}while(c=c.parent());return!f||!d&&e}var A=0;m.data(n,q),s.$$postDigest(function(){s.$$postDigest(function(){q.running=!1})});var B=e.classNameFilter(),C=B?function(a){return B.test(a)}:function(){return!0};return{enter:function(c,d,e,f){c=b.element(c),d=g(d),e=g(e),t(c),a.enter(c,d,e),s.$$postDigest(function(){c=h(c),w("enter","ng-enter",c,d,e,j,f)})},leave:function(c,d){c=b.element(c),x(c),t(c),s.$$postDigest(function(){w("leave","ng-leave",h(c),null,null,function(){a.leave(c)},d)})},move:function(c,d,e,f){c=b.element(c),d=g(d),e=g(e),x(c),t(c),a.move(c,d,e),s.$$postDigest(function(){c=h(c),w("move","ng-move",c,d,e,j,f)})},addClass:function(c,d,e){c=b.element(c),c=h(c),w("addClass",d,c,null,null,function(){a.addClass(c,d)},e)},removeClass:function(c,d,e){c=b.element(c),c=h(c),w("removeClass",d,c,null,null,function(){a.removeClass(c,d)},e)},setClass:function(c,d,e,f){c=b.element(c),c=h(c),w("setClass",[d,e],c,null,null,function(){a.setClass(c,d,e)},f)},enabled:function(a,b){switch(arguments.length){case 2:if(a)y(b);else{var c=b.data(n)||{};c.disabled=!0,b.data(n,c)}break;case 1:q.disabled=!a;break;default:a=!q.disabled}return!!a}}}]),e.register("",["$window","$sniffer","$timeout","$$animateReflow",function(d,e,g,h){function i(a,b){J&&J(),W.push(b),J=h(function(){k(W,function(a){a()}),W=[],J=null,U={}})}function l(a,c){var d=f(a);a=b.element(d),Z.push(a);var e=Date.now()+c;Y>=e||(g.cancel(X),Y=e,X=g(function(){n(Z),Z=[]},c,!1))}function n(a){k(a,function(a){var b=a.data(P);b&&(b.closeAnimationFn||j)()})}function o(a,b){var c=b?U[b]:null;if(!c){var e,f,g,h,i=0,j=0,l=0,n=0;k(a,function(a){if(a.nodeType==m){var b=d.getComputedStyle(a)||{};g=b[E+K],i=Math.max(p(g),i),h=b[E+L],e=b[E+M],j=Math.max(p(e),j),f=b[G+M],n=Math.max(p(f),n);var c=p(b[G+K]);c>0&&(c*=parseInt(b[G+N],10)||1),l=Math.max(c,l)}}),c={total:0,transitionPropertyStyle:h,transitionDurationStyle:g,transitionDelayStyle:e,transitionDelay:j,transitionDuration:i,animationDelayStyle:f,animationDelay:n,animationDuration:l},b&&(U[b]=c)}return c}function p(a){var c=0,d=b.isString(a)?a.split(/\s*,\s*/):[];return k(d,function(a){c=Math.max(parseFloat(a)||0,c)}),c}function q(a){var b=a.parent(),c=b.data(O);return c||(b.data(O,++V),c=V),c+"-"+f(a).getAttribute("class")}function r(a,b,c,d){var e=q(b),f=e+" "+c,g=U[f]?++U[f].total:0,h={};if(g>0){var i=c+"-stagger",k=e+" "+i,l=!U[k];l&&b.addClass(i),h=o(b,k),l&&b.removeClass(i)}d=d||function(a){return a()},b.addClass(c);var m=b.data(P)||{},n=d(function(){return o(b,f)}),p=n.transitionDuration,r=n.animationDuration;if(0===p&&0===r)return b.removeClass(c),!1;b.data(P,{running:m.running||0,itemIndex:g,stagger:h,timings:n,closeAnimationFn:j});var s=m.running>0||"setClass"==a;return p>0&&t(b,c,s),r>0&&h.animationDelay>0&&0===h.animationDuration&&u(b),!0}function s(a){return"ng-enter"==a||"ng-move"==a||"ng-leave"==a}function t(a,b,c){s(b)||!c?f(a).style[E+L]="none":a.addClass(Q)}function u(a){f(a).style[G]="none 0s"}function v(a){var b=E+L,c=f(a);c.style[b]&&c.style[b].length>0&&(c.style[b]=""),a.removeClass(Q)}function w(a){var b=G,c=f(a);c.style[b]&&c.style[b].length>0&&(c.style[b]="")}function x(a,b,c,d){function e(){b.off(t,g),b.removeClass(j),C(b,c);var a=f(b);for(var d in v)a.style.removeProperty(v[d])}function g(a){a.stopPropagation();var b=a.originalEvent||a,c=b.$manualTimeStamp||b.timeStamp||Date.now(),e=parseFloat(b.elapsedTime.toFixed(R));Math.max(c-s,0)>=r&&e>=p&&d()}var h=f(b),i=b.data(P);if(-1==h.getAttribute("class").indexOf(c)||!i)return void d();var j="";k(c.split(" "),function(a,b){j+=(b>0?" ":"")+a+"-active"});var m=i.stagger,n=i.timings,o=i.itemIndex,p=Math.max(n.transitionDuration,n.animationDuration),q=Math.max(n.transitionDelay,n.animationDelay),r=q*T,s=Date.now(),t=H+" "+F,u="",v=[];if(n.transitionDuration>0){var w=n.transitionPropertyStyle;-1==w.indexOf("all")&&(u+=I+"transition-property: "+w+";",u+=I+"transition-duration: "+n.transitionDurationStyle+";",v.push(I+"transition-property"),v.push(I+"transition-duration"))}if(o>0){if(m.transitionDelay>0&&0===m.transitionDuration){var x=n.transitionDelayStyle;u+=I+"transition-delay: "+y(x,m.transitionDelay,o)+"; ",v.push(I+"transition-delay")}m.animationDelay>0&&0===m.animationDuration&&(u+=I+"animation-delay: "+y(n.animationDelayStyle,m.animationDelay,o)+"; ",v.push(I+"animation-delay"))}if(v.length>0){var z=h.getAttribute("style")||"";h.setAttribute("style",z+"; "+u)}b.on(t,g),b.addClass(j),i.closeAnimationFn=function(){e(),d()};var A=o*(Math.max(m.animationDelay,m.transitionDelay)||0),B=(q+p)*S,D=(A+B)*T;return i.running++,l(b,D),e}function y(a,b,c){var d="";return k(a.split(","),function(a,e){d+=(e>0?",":"")+(c*b+parseInt(a,10))+"s"}),d}function z(a,b,c,d){return r(a,b,c,d)?function(a){a&&C(b,c)}:void 0}function A(a,b,c,d){return b.data(P)?x(a,b,c,d):(C(b,c),void d())}function B(a,b,c,d){var e=z(a,b,c);if(!e)return void d();var f=e;return i(b,function(){v(b,c),w(b),f=A(a,b,c,d)}),function(a){(f||j)(a)}}function C(a,b){a.removeClass(b);var c=a.data(P);c&&(c.running&&c.running--,c.running&&0!==c.running||a.removeData(P))}function D(a,c){var d="";return a=b.isArray(a)?a:a.split(/\s+/),k(a,function(a,b){a&&a.length>0&&(d+=(b>0?" ":"")+a+c)}),d}var E,F,G,H,I="";a.ontransitionend===c&&a.onwebkittransitionend!==c?(I="-webkit-",E="WebkitTransition",F="webkitTransitionEnd transitionend"):(E="transition",F="transitionend"),a.onanimationend===c&&a.onwebkitanimationend!==c?(I="-webkit-",G="WebkitAnimation",H="webkitAnimationEnd animationend"):(G="animation",H="animationend");var J,K="Duration",L="Property",M="Delay",N="IterationCount",O="$$ngAnimateKey",P="$$ngAnimateCSS3Data",Q="ng-animate-block-transitions",R=3,S=1.5,T=1e3,U={},V=0,W=[],X=null,Y=0,Z=[];return{enter:function(a,b){return B("enter",a,"ng-enter",b)},leave:function(a,b){return B("leave",a,"ng-leave",b)},move:function(a,b){return B("move",a,"ng-move",b)},beforeSetClass:function(a,b,c,d){var e=D(c,"-remove")+" "+D(b,"-add"),f=z("setClass",a,e,function(d){var e=a.attr("class");a.removeClass(c),a.addClass(b);var f=d();return a.attr("class",e),f});return f?(i(a,function(){v(a,e),w(a),d()}),f):void d()},beforeAddClass:function(a,b,c){var d=z("addClass",a,D(b,"-add"),function(c){a.addClass(b);var d=c();return a.removeClass(b),d});return d?(i(a,function(){v(a,b),w(a),c()}),d):void c()},setClass:function(a,b,c,d){c=D(c,"-remove"),b=D(b,"-add");var e=c+" "+b;return A("setClass",a,e,d)},addClass:function(a,b,c){return A("addClass",a,D(b,"-add"),c)},beforeRemoveClass:function(a,b,c){var d=z("removeClass",a,D(b,"-remove"),function(c){var d=a.attr("class");a.removeClass(b);var e=c();return a.attr("class",d),e});return d?(i(a,function(){v(a,b),w(a),c()}),d):void c()},removeClass:function(a,b,c){return A("removeClass",a,D(b,"-remove"),c)}}}])}])}(window,window.angular),function(){"use strict";var a=angular.module("LocalStorageModule",[]);a.provider("localStorageService",function(){this.prefix="ls",this.storageType="localStorage",this.cookie={expiry:30,path:"/"},this.notify={setItem:!0,removeItem:!1},this.setPrefix=function(a){this.prefix=a},this.setStorageType=function(a){this.storageType=a},this.setStorageCookie=function(a,b){this.cookie={expiry:a,path:b}},this.setStorageCookieDomain=function(a){this.cookie.domain=a},this.setNotify=function(a,b){this.notify={setItem:a,removeItem:b}},this.$get=["$rootScope","$window","$document",function(a,b,c){var d,e=this.prefix,f=this.cookie,g=this.notify,h=this.storageType;c||(c=document),"."!==e.substr(-1)&&(e=e?e+".":"");var i=function(a){return e+a},j=function(){try{var c=h in b&&null!==b[h],e=i("__"+Math.round(1e7*Math.random()));return c&&(d=b[h],d.setItem(e,""),d.removeItem(e)),c}catch(f){return h="cookie",a.$broadcast("LocalStorageModule.notification.error",f.message),!1}}(),k=function(b,c){if(!j)return a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),g.setItem&&a.$broadcast("LocalStorageModule.notification.setitem",{key:b,newvalue:c,storageType:"cookie"}),q(b,c);"undefined"==typeof c&&(c=null);try{(angular.isObject(c)||angular.isArray(c))&&(c=angular.toJson(c)),d&&d.setItem(i(b),c),g.setItem&&a.$broadcast("LocalStorageModule.notification.setitem",{key:b,newvalue:c,storageType:this.storageType})}catch(e){return a.$broadcast("LocalStorageModule.notification.error",e.message),q(b,c)}return!0},l=function(b){if(!j)return a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),r(b);var c=d?d.getItem(i(b)):null;return c&&"null"!==c?"{"===c.charAt(0)||"["===c.charAt(0)?angular.fromJson(c):c:null},m=function(b){if(!j)return a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),g.removeItem&&a.$broadcast("LocalStorageModule.notification.removeitem",{key:b,storageType:"cookie"}),s(b);try{d.removeItem(i(b)),g.removeItem&&a.$broadcast("LocalStorageModule.notification.removeitem",{key:b,storageType:this.storageType})}catch(c){return a.$broadcast("LocalStorageModule.notification.error",c.message),s(b)}return!0},n=function(){if(!j)return a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),!1;var b=e.length,c=[];for(var f in d)if(f.substr(0,b)===e)try{c.push(f.substr(b))}catch(g){return a.$broadcast("LocalStorageModule.notification.error",g.Description),[]}return c},o=function(b){b=b||"";var c=e.slice(0,-1),f=new RegExp(c+"."+b);if(!j)return a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),t();var g=e.length;for(var h in d)if(f.test(h))try{m(h.substr(g))}catch(i){return a.$broadcast("LocalStorageModule.notification.error",i.message),t()}return!0},p=function(){try{return navigator.cookieEnabled||"cookie"in c&&(c.cookie.length>0||(c.cookie="test").indexOf.call(c.cookie,"test")>-1)}catch(b){return a.$broadcast("LocalStorageModule.notification.error",b.message),!1}},q=function(b,d){if("undefined"==typeof d)return!1;if(!p())return a.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;try{var e="",g=new Date,h="";if(null===d?(g.setTime(g.getTime()+-864e5),e="; expires="+g.toGMTString(),d=""):0!==f.expiry&&(g.setTime(g.getTime()+24*f.expiry*60*60*1e3),e="; expires="+g.toGMTString()),b){var j="; path="+f.path;f.domain&&(h="; domain="+f.domain),c.cookie=i(b)+"="+encodeURIComponent(d)+e+j+h}}catch(k){return a.$broadcast("LocalStorageModule.notification.error",k.message),!1}return!0},r=function(b){if(!p())return a.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;for(var d=c.cookie&&c.cookie.split(";")||[],f=0;f<d.length;f++){for(var g=d[f];" "===g.charAt(0);)g=g.substring(1,g.length);if(0===g.indexOf(i(b)+"="))return decodeURIComponent(g.substring(e.length+b.length+1,g.length))}return null},s=function(a){q(a,null)},t=function(){for(var a=null,b=e.length,d=c.cookie.split(";"),f=0;f<d.length;f++){for(a=d[f];" "===a.charAt(0);)a=a.substring(1,a.length);var g=a.substring(b,a.indexOf("="));s(g)}},u=function(){return h},v=function(a,b,c){var d=l(b);null===d&&angular.isDefined(c)?d=c:angular.isObject(d)&&angular.isObject(c)&&(d=angular.extend(c,d)),a[b]=d,a.$watchCollection(b,function(a){k(b,a)})};return{isSupported:j,getStorageType:u,set:k,add:k,get:l,keys:n,remove:m,clearAll:o,bind:v,deriveKey:i,cookie:{set:q,add:q,get:r,remove:s,clearAll:t}}}]})}.call(this),angular.module("pascalprecht.translate",["ng"]).run(["$translate",function(a){var b=a.storageKey(),c=a.storage();c?c.get(b)?a.use(c.get(b)):angular.isString(a.preferredLanguage())?a.use(a.preferredLanguage()):c.set(b,a.use()):angular.isString(a.preferredLanguage())&&a.use(a.preferredLanguage())}]),angular.module("pascalprecht.translate").provider("$translate",["$STORAGE_KEY",function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p={},q=[],r=a,s=[],t=!1,u="translate-cloak",v=!1,w=".",x=function(){var a=window.navigator;return(a.language||a.browserLanguage||a.systemLanguage||a.userLanguage||"").split("-").join("_")},y=function(a){for(var b=[],d=angular.lowercase(a),e=0,f=q.length;f>e;e++)b.push(angular.lowercase(q[e]));if(b.indexOf(d)>-1)return a;if(c){var g;for(var h in c){var i=!1,j=c.hasOwnProperty(h)&&angular.lowercase(h)===angular.lowercase(a);if("*"===h.slice(-1)&&(i=h.slice(0,-1)===a.slice(0,h.length-1)),(j||i)&&(g=c[h],b.indexOf(angular.lowercase(g))>-1))return g}}var k=a.split("_");return k.length>1&&b.indexOf(angular.lowercase(k[0]))>-1?k[0]:a},z=function(a,b){if(!a&&!b)return p;if(a&&!b){if(angular.isString(a))return p[a]}else angular.isObject(p[a])||(p[a]={}),angular.extend(p[a],A(b));return this};this.translations=z,this.cloakClassName=function(a){return a?(u=a,this):u};var A=function(a,b,c,d){var e,f,g,h;b||(b=[]),c||(c={});for(e in a)a.hasOwnProperty(e)&&(h=a[e],angular.isObject(h)?A(h,b.concat(e),c,e):(f=b.length?""+b.join(w)+w+e:e,b.length&&e===d&&(g=""+b.join(w),c[g]="@:"+f),c[f]=h));return c};this.addInterpolation=function(a){return s.push(a),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(a){return k=a,this},this.useSanitizeValueStrategy=function(a){return t=a,this},this.preferredLanguage=function(a){return a?(b=a,this):b},this.translationNotFoundIndicator=function(a){return this.translationNotFoundIndicatorLeft(a),this.translationNotFoundIndicatorRight(a),this},this.translationNotFoundIndicatorLeft=function(a){return a?(n=a,this):n},this.translationNotFoundIndicatorRight=function(a){return a?(o=a,this):o},this.fallbackLanguage=function(a){return B(a),this};var B=function(a){return a?(angular.isString(a)?(e=!0,d=[a]):angular.isArray(a)&&(e=!1,d=a),angular.isString(b)&&d.push(b),this):e?d[0]:d};this.use=function(a){if(a){if(!p[a]&&!l)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+a+"'");return f=a,this}return f};var C=function(a){return a?void(r=a):i?i+r:r};this.storageKey=C,this.useUrlLoader=function(a){return this.useLoader("$translateUrlLoader",{url:a})},this.useStaticFilesLoader=function(a){return this.useLoader("$translateStaticFilesLoader",a)},this.useLoader=function(a,b){return l=a,m=b||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(a){return h=a,this},this.storagePrefix=function(a){return a?(i=a,this):a},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(a){return j=a,this},this.usePostCompiling=function(a){return v=!!a,this},this.determinePreferredLanguage=function(a){var c=a&&angular.isFunction(a)?a():x();return b=q.length?y(c):c,this},this.registerAvailableLanguageKeys=function(a,b){return a?(q=a,b&&(c=b),this):q},this.$get=["$log","$injector","$rootScope","$q",function(a,c,i,q){var w,x,D,E=c.get(k||"$translateDefaultInterpolation"),F=!1,G={},H={},I=function(a,c,e){if(angular.isArray(a)){var g=function(a){for(var b={},d=[],f=function(a){var d=q.defer(),f=function(c){b[a]=c,d.resolve([a,c])};return I(a,c,e).then(f,f),d.promise},g=0,h=a.length;h>g;g++)d.push(f(a[g]));return q.all(d).then(function(){return b})};return g(a)}var i=q.defer();a&&(a=a.trim());var j=function(){var a=b?H[b]:H[f];if(x=0,h&&!a){var c=w.get(r);if(a=H[c],d&&d.length){var e=J(d,c);x=e>-1?e+=1:0,d.push(b)}}return a}();return j?j.then(function(){U(a,c,e).then(i.resolve,i.reject)},i.reject):U(a,c,e).then(i.resolve,i.reject),i.promise},J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K=function(a){return n&&(a=[n,a].join(" ")),o&&(a=[a,o].join(" ")),a},L=function(a){f=a,i.$emit("$translateChangeSuccess"),h&&w.set(I.storageKey(),f),E.setLocale(f),angular.forEach(G,function(a,b){G[b].setLocale(f)}),i.$emit("$translateChangeEnd")},M=function(a){if(!a)throw"No language key specified for loading.";var b=q.defer();return i.$emit("$translateLoadingStart"),F=!0,c.get(l)(angular.extend(m,{key:a})).then(function(c){var d={};i.$emit("$translateLoadingSuccess"),angular.isArray(c)?angular.forEach(c,function(a){angular.extend(d,A(a))}):angular.extend(d,A(c)),F=!1,b.resolve({key:a,table:d}),i.$emit("$translateLoadingEnd")},function(a){i.$emit("$translateLoadingError"),b.reject(a),i.$emit("$translateLoadingEnd")}),b.promise};if(h&&(w=c.get(h),!w.get||!w.set))throw new Error("Couldn't use storage '"+h+"', missing get() or set() method!");angular.isFunction(E.useSanitizeValueStrategy)&&E.useSanitizeValueStrategy(t),s.length&&angular.forEach(s,function(a){var d=c.get(a);d.setLocale(b||f),angular.isFunction(d.useSanitizeValueStrategy)&&d.useSanitizeValueStrategy(t),G[d.getInterpolationIdentifier()]=d});var N=function(a){var b=q.defer();return p.hasOwnProperty(a)?(b.resolve(p[a]),b.promise):(H[a].then(function(a){z(a.key,a.table),b.resolve(a.table)},b.reject),b.promise)},O=function(a,b,c,d){var e=q.defer();return N(a).then(function(g){g.hasOwnProperty(b)?(d.setLocale(a),e.resolve(d.interpolate(g[b],c)),d.setLocale(f)):e.reject()},e.reject),e.promise},P=function(a,b,c,d){var e,g=p[a];return g.hasOwnProperty(b)&&(d.setLocale(a),e=d.interpolate(g[b],c),d.setLocale(f)),e},Q=function(a,b,e,g){var h=q.defer();if(a<d.length){var i=d[a];O(i,b,e,g).then(function(a){h.resolve(a)},function(){var c=Q(a+1,b,e,g);h.resolve(c)})}else if(j){var k=c.get(j)(b,f);h.resolve(void 0!==k?k:b)}else h.resolve(b);return h.promise},R=function(a,b,c,e){var f;if(a<d.length){var g=d[a];f=P(g,b,c,e),f||(f=R(a+1,b,c,e))}return f},S=function(a,b,c){return Q(D>0?D:x,a,b,c)},T=function(a,b,c){return R(D>0?D:x,a,b,c)},U=function(a,b,e){var g=q.defer(),h=f?p[f]:p,i=e?G[e]:E;if(h&&h.hasOwnProperty(a)){var k=h[a];"@:"===k.substr(0,2)?I(k.substr(2),b,e).then(g.resolve,g.reject):g.resolve(i.interpolate(k,b))}else j&&!F&&c.get(j)(a,f),f&&d&&d.length?S(a,b,i).then(function(a){g.resolve(a)},function(a){g.reject(K(a))}):g.reject(K(a));return g.promise},V=function(a,b,e){var g,h=f?p[f]:p,i=e?G[e]:E;if(h&&h.hasOwnProperty(a)){var k=h[a];g="@:"===k.substr(0,2)?V(k.substr(2),b,e):i.interpolate(k,b)}else j&&!F&&c.get(j)(a,f),f&&d&&d.length?(x=0,g=T(a,b,i)):g=K(a);return g};if(I.preferredLanguage=function(){return b},I.cloakClassName=function(){return u},I.fallbackLanguage=function(a){if(void 0!==a&&null!==a){if(B(a),l&&d&&d.length)for(var b=0,c=d.length;c>b;b++)H[d[b]]||(H[d[b]]=M(d[b]));I.use(I.use())}return e?d[0]:d},I.useFallbackLanguage=function(a){if(void 0!==a&&null!==a)if(a){var b=J(d,a);b>-1&&(D=b)}else D=0},I.proposedLanguage=function(){return g},I.storage=function(){return w},I.use=function(a){if(!a)return f;var b=q.defer();i.$emit("$translateChangeStart");var c=y(a);return c&&(a=c),!p[a]&&l?(g=a,H[a]=M(a).then(function(c){z(c.key,c.table),b.resolve(c.key),g===a&&(L(c.key),g=void 0)},function(a){g=void 0,i.$emit("$translateChangeError"),b.reject(a),i.$emit("$translateChangeEnd")})):(b.resolve(a),L(a)),b.promise},I.storageKey=function(){return C()},I.isPostCompilingEnabled=function(){return v},I.refresh=function(a){function b(){e.resolve(),i.$emit("$translateRefreshEnd")}function c(){e.reject(),i.$emit("$translateRefreshEnd")}if(!l)throw new Error("Couldn't refresh translation table, no loader registered!");var e=q.defer();if(i.$emit("$translateRefreshStart"),a)p[a]?M(a).then(function(c){z(c.key,c.table),a===f&&L(f),b()},c):c();else{var g=[];if(d&&d.length)for(var h=0,j=d.length;j>h;h++)g.push(M(d[h]));f&&g.push(M(f)),q.all(g).then(function(a){angular.forEach(a,function(a){p[a.key]&&delete p[a.key],z(a.key,a.table)}),f&&L(f),b()})}return e.promise},I.instant=function(a,e,g){if(null===a||angular.isUndefined(a))return a;if(angular.isArray(a)){for(var h={},i=0,k=a.length;k>i;i++)h[a[i]]=I.instant(a[i],e,g);return h}if(angular.isString(a)&&a.length<1)return a;a&&(a=a.trim());var l,m=[];b&&m.push(b),f&&m.push(f),d&&d.length&&(m=m.concat(d));for(var n=0,o=m.length;o>n;n++){var q=m[n];if(p[q]&&"undefined"!=typeof p[q][a]&&(l=V(a,e,g)),"undefined"!=typeof l)break}return l||""===l||(l=a,j&&!F&&c.get(j)(a,f)),l},l&&(angular.equals(p,{})&&I.use(I.use()),d&&d.length))for(var W=0,X=d.length;X>W;W++)H[d[W]]=M(d[W]);return I}]}]),angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",["$interpolate",function(a){var b,c={},d="default",e=null,f={escaped:function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=angular.element("<div></div>").text(a[c]).html());return b}},g=function(a){var b;return b=angular.isFunction(f[e])?f[e](a):a};return c.setLocale=function(a){b=a},c.getInterpolationIdentifier=function(){return d},c.useSanitizeValueStrategy=function(a){return e=a,this},c.interpolate=function(b,c){return e&&(c=g(c)),a(b)(c||{})},c}]),angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",["$translate","$q","$interpolate","$compile","$parse","$rootScope",function(a,b,c,d,e,f){return{restrict:"AE",scope:!0,compile:function(b,g){var h=g.translateValues?g.translateValues:void 0,i=g.translateInterpolation?g.translateInterpolation:void 0,j=b[0].outerHTML.match(/translate-value-+/i);return function(b,k,l){if(b.interpolateParams={},l.$observe("translate",function(a){b.translationId=angular.equals(a,"")||!angular.isDefined(a)?c(k.text().replace(/^\s+|\s+$/g,""))(b.$parent):a}),l.$observe("translateDefault",function(a){b.defaultText=a}),h&&l.$observe("translateValues",function(a){a&&b.$parent.$watch(function(){angular.extend(b.interpolateParams,e(a)(b.$parent))})}),j){var m=function(a){l.$observe(a,function(c){b.interpolateParams[angular.lowercase(a.substr(14,1))+a.substr(15)]=c})};for(var n in l)l.hasOwnProperty(n)&&"translateValue"===n.substr(0,14)&&"translateValues"!==n&&m(n)}var o=function(b,c,e){e||"undefined"==typeof c.defaultText||(b=c.defaultText),k.html(b);var f=a.isPostCompilingEnabled(),h="undefined"!=typeof g.translateCompile,i=h&&"false"!==g.translateCompile;(f&&!h||i)&&d(k.contents())(c)},p=function(){return h||j?function(){var c=function(){b.translationId&&b.interpolateParams&&a(b.translationId,b.interpolateParams,i).then(function(a){o(a,b,!0)},function(a){o(a,b,!1)})};b.$watch("interpolateParams",c,!0),b.$watch("translationId",c)}:function(){var c=b.$watch("translationId",function(d){b.translationId&&d&&a(d,{},i).then(function(a){o(a,b,!0),c()},function(a){o(a,b,!1),c()})},!0)}}(),q=f.$on("$translateChangeSuccess",p);p(),b.$on("$destroy",q)}}}}]),angular.module("pascalprecht.translate").directive("translateCloak",["$rootScope","$translate",function(a,b){return{compile:function(c){a.$on("$translateLoadingSuccess",function(){c.removeClass(b.cloakClassName())}),c.addClass(b.cloakClassName())}}}]),angular.module("pascalprecht.translate").filter("translate",["$parse","$translate",function(a,b){return function(c,d,e){return angular.isObject(d)||(d=a(d)(this)),b.instant(c,d,e)}}]),function(){"use strict";function a(){this._events=this._events||{}}function b(c){var d=this;if(!(this instanceof b))return new b(arguments[0],arguments[1],arguments[2]);d.cancel=b.cancel,a.call(this),"number"==typeof c&&(c={cols:arguments[0],rows:arguments[1],handler:arguments[2]}),c=c||{},Object.keys(b.defaults).forEach(function(a){null==c[a]&&(c[a]=b.options[a],b[a]!==b.defaults[a]&&(c[a]=b[a])),d[a]=c[a]}),8===c.colors.length?c.colors=c.colors.concat(b._colors.slice(8)):16===c.colors.length?c.colors=c.colors.concat(b._colors.slice(16)):10===c.colors.length?c.colors=c.colors.slice(0,-2).concat(b._colors.slice(8,-2),c.colors.slice(-2)):18===c.colors.length&&(c.colors=c.colors.concat(b._colors.slice(16,-2),c.colors.slice(-2))),this.colors=c.colors,this.options=c,this.parent=c.body||c.parent||(l?l.getElementsByTagName("body")[0]:null),this.cols=c.cols||c.geometry[0],this.rows=c.rows||c.geometry[1],c.handler&&this.on("data",c.handler),this.ybase=0,this.ydisp=0,this.x=0,this.y=0,this.cursorState=0,this.cursorHidden=!1,this.convertEol,this.state=0,this.queue="",this.scrollTop=0,this.scrollBottom=this.rows-1,this.applicationKeypad=!1,this.applicationCursor=!1,this.originMode=!1,this.insertMode=!1,this.wraparoundMode=!1,this.normal=null,this.charset=null,this.gcharset=null,this.glevel=0,this.charsets=[null],this.decLocator,this.x10Mouse,this.vt200Mouse,this.vt300Mouse,this.normalMouse,this.mouseEvents,this.sendFocus,this.utfMouse,this.sgrMouse,this.urxvtMouse,this.element,this.children,this.refreshStart,this.refreshEnd,this.savedX,this.savedY,this.savedCols,this.readable=!0,this.writable=!0,this.defAttr=131840,this.curAttr=this.defAttr,this.params=[],this.currentParam=0,this.prefix="",this.postfix="",this.lines=[];for(var e=this.rows;e--;)this.lines.push(this.blankLine());this.tabs,this.setupStops()}function c(a,b,c,d){Array.isArray(a)||(a=[a]),a.forEach(function(a){a.addEventListener(b,c,d||!1)})}function d(a,b,c,d){a.removeEventListener(b,c,d||!1)}function e(a,b){return this.cancelEvents||b?(a.preventDefault(),a.stopPropagation(),!1):void 0}function f(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}function g(a){var b=a.getElementsByTagName("body")[0],c=a.createElement("span");c.innerHTML="hello world",b.appendChild(c);var d=c.scrollWidth;c.style.fontWeight="bold";var e=c.scrollWidth;return b.removeChild(c),d!==e}function h(a){return"＀">=a?!1:a>="！"&&"ﾾ">=a||a>="ￂ"&&"ￇ">=a||a>="ￊ"&&"ￏ">=a||a>="ￒ"&&"ￗ">=a||a>="ￚ"&&"ￜ">=a||a>="￠"&&"￦">=a||a>="￨"&&"￮">=a}function i(a,c,d){var e=a<<16|c<<8|d;if(null!=i._cache[e])return i._cache[e];for(var f,g,h,j,k,l=1/0,m=-1,n=0;n<b.vcolors.length;n++){if(f=b.vcolors[n],g=f[0],h=f[1],j=f[2],k=i.distance(a,c,d,g,h,j),0===k){m=n;break}l>k&&(l=k,m=n)}return i._cache[e]=m}function j(a,b,c){if(a.forEach)return a.forEach(b,c);for(var d=0;d<a.length;d++)b.call(c,a[d],d,a)}function k(a){if(Object.keys)return Object.keys(a);var b,c=[];for(b in a)Object.prototype.hasOwnProperty.call(a,b)&&c.push(b);return c}var l=this.document;a.prototype.addListener=function(a,b){this._events[a]=this._events[a]||[],this._events[a].push(b)},a.prototype.on=a.prototype.addListener,a.prototype.removeListener=function(a,b){if(this._events[a])for(var c=this._events[a],d=c.length;d--;)if(c[d]===b||c[d].listener===b)return void c.splice(d,1)},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(a){this._events[a]&&delete this._events[a]},a.prototype.once=function(a,b){function c(){var d=Array.prototype.slice.call(arguments);return this.removeListener(a,c),b.apply(this,d)}return c.listener=b,this.on(a,c)},a.prototype.emit=function(a){if(this._events[a])for(var b=Array.prototype.slice.call(arguments,1),c=this._events[a],d=c.length,e=0;d>e;e++)c[e].apply(this,b)},a.prototype.listeners=function(a){return this._events[a]=this._events[a]||[]};var m=0,n=1,o=2,p=3,q=4,r=5,s=6;f(b,a),b.prototype.eraseAttr=function(){return-512&this.defAttr|511&this.curAttr},b.tangoColors=["#2e3436","#cc0000","#4e9a06","#c4a000","#3465a4","#75507b","#06989a","#d3d7cf","#555753","#ef2929","#8ae234","#fce94f","#729fcf","#ad7fa8","#34e2e2","#eeeeec"],b.colors=function(){function a(a,b,d){e.push("#"+c(a)+c(b)+c(d))
}function c(a){return a=a.toString(16),a.length<2?"0"+a:a}var d,e=b.tangoColors.slice(),f=[0,95,135,175,215,255];for(d=0;216>d;d++)a(f[d/36%6|0],f[d/6%6|0],f[d%6]);for(d=0;24>d;d++)f=8+10*d,a(f,f,f);return e}(),b._colors=b.colors.slice(),b.vcolors=function(){for(var a,c=[],d=b.colors,e=0;256>e;e++)a=parseInt(d[e].substring(1),16),c.push([a>>16&255,a>>8&255,255&a]);return c}(),b.defaults={colors:b.colors,theme:"default",convertEol:!1,termName:"xterm",geometry:[80,24],cursorBlink:!1,visualBell:!1,popOnBell:!1,scrollback:1e3,screenKeys:!1,debug:!1,cancelEvents:!1},b.options={},j(k(b.defaults),function(a){b[a]=b.defaults[a],b.options[a]=b.defaults[a]}),b.prototype.focus=function(){l.activeElement!==this.textarea&&(this.sendFocus&&this.send("[I"),this.showCursor(),this.textarea.focus(),this.emit("focus",{terminal:this}))},b.prototype.blur=function(){b.focus===this&&(this.cursorState=0,this.refresh(this.y,this.y),this.sendFocus&&this.send("[O"),this.emit("blur",{terminal:this}))},b.prototype.initGlobal=function(){b.bindPaste(this),b.bindKeys(this),b.bindCopy(this)},b.bindPaste=function(a){c([a.textarea,a.element],"paste",function(b){if(b.stopPropagation(),b.clipboardData){var c=b.clipboardData.getData("text/plain");a.handler(c)}return a.textarea.value="",a.cancel(b)})},b.bindKeys=function(a){c(a.element,"keydown",function(b){l.activeElement==this&&a.keyDown(b)},!0),c(a.element,"keypress",function(b){l.activeElement==this&&a.keyPress(b)},!0),c(a.element,"keyup",a.focus.bind(a)),c(a.textarea,"keydown",function(b){a.keyDown(b)},!0),c(a.textarea,"keypress",function(b){a.keyPress(b),this.value=""},!0)},b.bindCopy=function(a){c(a.element,"copy",function(){})},b.prototype.insertRow=function(a){return"object"!=typeof a&&(a=l.createElement("div")),this.rowContainer.appendChild(a),this.children.push(a),a},b.prototype.open=function(a){var d=this,e=0;if(this.parent=a||this.parent,!this.parent)throw new Error("Terminal requires a parent element.");for(this.context=this.parent.ownerDocument.defaultView,this.document=this.parent.ownerDocument,this.body=this.document.getElementsByTagName("body")[0],this.context.navigator&&this.context.navigator.userAgent&&(this.isMac=!!~this.context.navigator.userAgent.indexOf("Mac"),this.isIpad=!!~this.context.navigator.userAgent.indexOf("iPad"),this.isIphone=!!~this.context.navigator.userAgent.indexOf("iPhone"),this.isMSIE=!!~this.context.navigator.userAgent.indexOf("MSIE")),this.element=this.document.createElement("div"),this.element.classList.add("terminal","xterm","xterm-theme-"+this.theme),this.element.setAttribute("tabindex",0),this.rowContainer=l.createElement("div"),this.rowContainer.classList.add("xterm-rows"),this.element.appendChild(this.rowContainer),this.children=[],this.helperContainer=l.createElement("div"),this.helperContainer.classList.add("xterm-helpers"),this.element.appendChild(this.helperContainer),this.textarea=l.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.helperContainer.appendChild(this.textarea);e<this.rows;e++)this.insertRow();this.parent.appendChild(this.element),this.refresh(0,this.rows-1),this.initGlobal(),this.focus(),this.startBlink(),c(this.element,"mouseup",function(){var a=l.getSelection();"Range"!=a.type&&d.focus()}),this.bindMouse(),null==b.brokenBold&&(b.brokenBold=g(this.document)),this.emit("open")},b.prototype.bindMouse=function(){function a(a){var b,c;if(b=g(a),c=h(a))switch(f(b,c),a.type){case"mousedown":k=b;break;case"mouseup":k=32;break;case l:}}function b(a){var b,c=k;b=h(a),b&&(c+=32,f(c,b))}function e(a,b){if(j.utfMouse){if(2047===b)return a.push(0);127>b?a.push(b):(b>2047&&(b=2047),a.push(192|b>>6),a.push(128|63&b))}else{if(255===b)return a.push(0);b>127&&(b=127),a.push(b)}}function f(a,b){if(j.vt300Mouse){a&=3,b.x-=32,b.y-=32;var c="[24";if(0===a)c+="1";else if(1===a)c+="3";else if(2===a)c+="5";else{if(3===a)return;c+="0"}return c+="~["+b.x+","+b.y+"]\r",void j.send(c)}if(j.decLocator)return a&=3,b.x-=32,b.y-=32,0===a?a=2:1===a?a=4:2===a?a=6:3===a&&(a=3),void j.send("["+a+";"+(3===a?4:0)+";"+b.y+";"+b.x+";"+(b.page||0)+"&w");if(j.urxvtMouse)return b.x-=32,b.y-=32,b.x++,b.y++,void j.send("["+a+";"+b.x+";"+b.y+"M");if(j.sgrMouse)return b.x-=32,b.y-=32,void j.send("[<"+(3===(3&a)?-4&a:a)+";"+b.x+";"+b.y+(3===(3&a)?"m":"M"));var c=[];e(c,a),e(c,b.x),e(c,b.y),j.send("[M"+t.fromCharCode.apply(t,c))}function g(a){var b,c,d,e,f;switch(a.type){case"mousedown":b=null!=a.button?+a.button:null!=a.which?a.which-1:null,j.isMSIE&&(b=1===b?0:4===b?1:b);break;case"mouseup":b=3;break;case"DOMMouseScroll":b=a.detail<0?64:65;break;case"mousewheel":b=a.wheelDeltaY>0?64:65}return c=a.shiftKey?4:0,d=a.metaKey?8:0,e=a.ctrlKey?16:0,f=c|d|e,j.vt200Mouse?f&=e:j.normalMouse||(f=0),b=32+(f<<2)+b}function h(a){var b,c,d,e,f;if(null!=a.pageX){for(b=a.pageX,c=a.pageY,f=j.element;f&&f!==j.document.documentElement;)b-=f.offsetLeft,c-=f.offsetTop,f="offsetParent"in f?f.offsetParent:f.parentNode;return d=j.element.clientWidth,e=j.element.clientHeight,b=Math.round(b/d*j.cols),c=Math.round(c/e*j.rows),0>b&&(b=0),b>j.cols&&(b=j.cols),0>c&&(c=0),c>j.rows&&(c=j.rows),b+=32,c+=32,{x:b,y:c,type:a.type===l?"mousewheel":a.type}}}var i=this.element,j=this,k=32,l="onmousewheel"in this.context?"mousewheel":"DOMMouseScroll";c(i,"mousedown",function(e){return j.mouseEvents?(a(e),j.focus(),j.vt200Mouse?(a({__proto__:e,type:"mouseup"}),j.cancel(e)):(j.normalMouse&&c(j.document,"mousemove",b),j.x10Mouse||c(j.document,"mouseup",function f(c){return a(c),j.normalMouse&&d(j.document,"mousemove",b),d(j.document,"mouseup",f),j.cancel(c)}),j.cancel(e))):void 0}),c(i,l,function(b){return j.mouseEvents&&!(j.x10Mouse||j.vt300Mouse||j.decLocator)?(a(b),j.cancel(b)):void 0}),c(i,l,function(a){return j.mouseEvents||j.applicationKeypad?void 0:(j.scrollDisp("DOMMouseScroll"===a.type?a.detail<0?-5:5:a.wheelDeltaY>0?-5:5),j.cancel(a))})},b.prototype.destroy=function(){this.readable=!1,this.writable=!1,this._events={},this.handler=function(){},this.write=function(){},this.element.parentNode&&this.element.parentNode.removeChild(this.element)},b.prototype.refresh=function(a,c){var d,e,f,g,i,j,k,m,n,o,p,q,r,s,t=l.activeElement;for(c-a>=this.rows/2&&(s=this.element.parentNode,s&&s.removeChild(this.element)),k=this.cols,e=a,c>=this.lines.length&&(this.log("`end` is too large. Most likely a bad CSR."),c=this.lines.length-1);c>=e;e++){for(r=e+this.ydisp,g=this.lines[r],i="",d=e===this.y&&this.cursorState&&this.ydisp===this.ybase&&!this.cursorHidden?this.x:-1,n=this.defAttr,f=0;k>f;f++){switch(m=g[f][0],j=g[f][1],f===d&&(m=-1),m!==n&&(n!==this.defAttr&&(i+="</span>"),m!==this.defAttr&&(-1===m?i+='<span class="reverse-video terminal-cursor">':(i+='<span class="',o=511&m,p=m>>9&511,q=m>>18,1&q&&(b.brokenBold||(i+=" xterm-bold "),8>p&&(p+=8)),2&q&&(i+=" xterm-underline "),4&q&&(i+=" xterm-blink "),8&q&&(o=m>>9&511,p=511&m,1&q&&8>p&&(p+=8)),16&q&&(i+=" xterm-hidden "),256!==o&&(i+=" xterm-bg-color-"+o+" "),257!==p&&(i+=" xterm-color-"+p+" "),i+='">'))),j){case"&":i+="&amp;";break;case"<":i+="&lt;";break;case">":i+="&gt;";break;default:" ">=j?i+="&nbsp;":(h(j)&&f++,i+=j)}n=m}n!==this.defAttr&&(i+="</span>"),this.children[e].innerHTML=i}s&&s.appendChild(this.element),t.focus(),this.emit("refresh",{element:this.element,start:a,end:c})},b.prototype._cursorBlink=function(){b.focus===this&&(this.cursorState^=1,this.refresh(this.y,this.y))},b.prototype.showCursor=function(){this.cursorState||(this.cursorState=1,this.refresh(this.y,this.y))},b.prototype.startBlink=function(){if(this.cursorBlink){var a=this;this._blinker=function(){a._cursorBlink()},this._blink=v(this._blinker,500)}},b.prototype.refreshBlink=function(){this.cursorBlink&&(clearInterval(this._blink),this._blink=v(this._blinker,500))},b.prototype.scroll=function(){var a;++this.ybase===this.scrollback&&(this.ybase=this.ybase/2|0,this.lines=this.lines.slice(-(this.ybase+this.rows)+1)),this.ydisp=this.ybase,a=this.ybase+this.rows-1,a-=this.rows-1-this.scrollBottom,a===this.lines.length?this.lines.push(this.blankLine()):this.lines.splice(a,0,this.blankLine()),0!==this.scrollTop&&(0!==this.ybase&&(this.ybase--,this.ydisp=this.ybase),this.lines.splice(this.ybase+this.scrollTop,1)),this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)},b.prototype.scrollDisp=function(a){this.ydisp+=a,this.ydisp>this.ybase?this.ydisp=this.ybase:this.ydisp<0&&(this.ydisp=0),this.refresh(0,this.rows-1)},b.prototype.write=function(a){var c,d,e,f=a.length,g=0;for(this.refreshStart=this.y,this.refreshEnd=this.y,this.ybase!==this.ydisp&&(this.ydisp=this.ybase,this.maxRange());f>g;g++)switch(e=a[g],this.state){case m:switch(e){case"":this.bell();break;case"\n":case"":case"\f":this.convertEol&&(this.x=0),this.y++,this.y>this.scrollBottom&&(this.y--,this.scroll());break;case"\r":this.x=0;break;case"\b":this.x>0&&this.x--;break;case"	":this.x=this.nextStop();break;case"":this.setgLevel(1);break;case"":this.setgLevel(0);break;case"":this.state=n;break;default:if(e>=" "&&(this.charset&&this.charset[e]&&(e=this.charset[e]),this.x>=this.cols&&(this.x=0,this.y++,this.y>this.scrollBottom&&(this.y--,this.scroll())),this.lines[this.y+this.ybase][this.x]=[this.curAttr,e],this.x++,this.updateRange(this.y),h(e))){if(c=this.y+this.ybase,this.cols<2||this.x>=this.cols){this.lines[c][this.x-1]=[this.curAttr," "];break}this.lines[c][this.x]=[this.curAttr," "],this.x++}}break;case n:switch(e){case"[":this.params=[],this.currentParam=0,this.state=o;break;case"]":this.params=[],this.currentParam=0,this.state=p;break;case"P":this.params=[],this.currentParam=0,this.state=r;break;case"_":this.state=s;break;case"^":this.state=s;break;case"c":this.reset();break;case"E":this.x=0;case"D":this.index();break;case"M":this.reverseIndex();break;case"%":this.setgLevel(0),this.setgCharset(0,b.charsets.US),this.state=m,g++;break;case"(":case")":case"*":case"+":case"-":case".":switch(e){case"(":this.gcharset=0;break;case")":this.gcharset=1;break;case"*":this.gcharset=2;break;case"+":this.gcharset=3;break;case"-":this.gcharset=1;break;case".":this.gcharset=2}this.state=q;break;case"/":this.gcharset=3,this.state=q,g--;break;case"N":break;case"O":break;case"n":this.setgLevel(2);break;case"o":this.setgLevel(3);break;case"|":this.setgLevel(3);break;case"}":this.setgLevel(2);break;case"~":this.setgLevel(1);break;case"7":this.saveCursor(),this.state=m;break;case"8":this.restoreCursor(),this.state=m;break;case"#":this.state=m,g++;break;case"H":this.tabSet();break;case"=":this.log("Serial port requested application keypad."),this.applicationKeypad=!0,this.state=m;break;case">":this.log("Switching back to normal keypad."),this.applicationKeypad=!1,this.state=m;break;default:this.state=m,this.error("Unknown ESC control: %s.",e)}break;case q:switch(e){case"0":d=b.charsets.SCLD;break;case"A":d=b.charsets.UK;break;case"B":d=b.charsets.US;break;case"4":d=b.charsets.Dutch;break;case"C":case"5":d=b.charsets.Finnish;break;case"R":d=b.charsets.French;break;case"Q":d=b.charsets.FrenchCanadian;break;case"K":d=b.charsets.German;break;case"Y":d=b.charsets.Italian;break;case"E":case"6":d=b.charsets.NorwegianDanish;break;case"Z":d=b.charsets.Spanish;break;case"H":case"7":d=b.charsets.Swedish;break;case"=":d=b.charsets.Swiss;break;case"/":d=b.charsets.ISOLatin,g++;break;default:d=b.charsets.US}this.setgCharset(this.gcharset,d),this.gcharset=null,this.state=m;break;case p:if(""===e||""===e){switch(""===e&&g++,this.params.push(this.currentParam),this.params[0]){case 0:case 1:case 2:this.params[1]&&(this.title=this.params[1],this.handleTitle(this.title));break;case 3:break;case 4:case 5:break;case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:break;case 46:break;case 50:break;case 51:break;case 52:break;case 104:case 105:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:}this.params=[],this.currentParam=0,this.state=m}else this.params.length?this.currentParam+=e:e>="0"&&"9">=e?this.currentParam=10*this.currentParam+e.charCodeAt(0)-48:";"===e&&(this.params.push(this.currentParam),this.currentParam="");break;case o:if("?"===e||">"===e||"!"===e){this.prefix=e;break}if(e>="0"&&"9">=e){this.currentParam=10*this.currentParam+e.charCodeAt(0)-48;break}if("$"===e||'"'===e||" "===e||"'"===e){this.postfix=e;break}if(this.params.push(this.currentParam),this.currentParam=0,";"===e)break;switch(this.state=m,e){case"A":this.cursorUp(this.params);break;case"B":this.cursorDown(this.params);break;case"C":this.cursorForward(this.params);break;case"D":this.cursorBackward(this.params);break;case"H":this.cursorPos(this.params);break;case"J":this.eraseInDisplay(this.params);break;case"K":this.eraseInLine(this.params);break;case"m":this.prefix||this.charAttributes(this.params);break;case"n":this.prefix||this.deviceStatus(this.params);break;case"@":this.insertChars(this.params);break;case"E":this.cursorNextLine(this.params);break;case"F":this.cursorPrecedingLine(this.params);break;case"G":this.cursorCharAbsolute(this.params);break;case"L":this.insertLines(this.params);break;case"M":this.deleteLines(this.params);break;case"P":this.deleteChars(this.params);break;case"X":this.eraseChars(this.params);break;case"`":this.charPosAbsolute(this.params);break;case"a":this.HPositionRelative(this.params);break;case"c":this.sendDeviceAttributes(this.params);break;case"d":this.linePosAbsolute(this.params);break;case"e":this.VPositionRelative(this.params);break;case"f":this.HVPosition(this.params);break;case"h":this.setMode(this.params);break;case"l":this.resetMode(this.params);break;case"r":this.setScrollRegion(this.params);break;case"s":this.saveCursor(this.params);break;case"u":this.restoreCursor(this.params);break;case"I":this.cursorForwardTab(this.params);break;case"S":this.scrollUp(this.params);break;case"T":this.params.length<2&&!this.prefix&&this.scrollDown(this.params);break;case"Z":this.cursorBackwardTab(this.params);break;case"b":this.repeatPrecedingCharacter(this.params);break;case"g":this.tabClear(this.params);break;case"p":switch(this.prefix){case"!":this.softReset(this.params)}break;default:this.error("Unknown CSI code: %s.",e)}this.prefix="",this.postfix="";break;case r:if(""===e||""===e){switch(""===e&&g++,this.prefix){case"":break;case"$q":var i=this.currentParam,j=!1;switch(i){case'"q':i='0"q';break;case'"p':i='61"p';break;case"r":i=""+(this.scrollTop+1)+";"+(this.scrollBottom+1)+"r";break;case"m":i="0m";break;default:this.error("Unknown DCS Pt: %s.",i),i=""}this.send("P"+ +j+"$r"+i+"\\");break;case"+p":break;case"+q":var i=this.currentParam,j=!1;this.send("P"+ +j+"+r"+i+"\\");break;default:this.error("Unknown DCS prefix: %s.",this.prefix)}this.currentParam=0,this.prefix="",this.state=m}else this.currentParam?this.currentParam+=e:this.prefix||"$"===e||"+"===e?2===this.prefix.length?this.currentParam=e:this.prefix+=e:this.currentParam=e;break;case s:(""===e||""===e)&&(""===e&&g++,this.state=m)}this.updateRange(this.y),this.refresh(this.refreshStart,this.refreshEnd)},b.prototype.writeln=function(a){this.write(a+"\r\n")},b.prototype.keyDown=function(a){var b;switch(a.keyCode){case 8:if(a.shiftKey){b="\b";break}b="";break;case 9:if(a.shiftKey){b="[Z";break}b="	",this.cancel(a,!0);break;case 13:b="\r",this.cancel(a,!0);break;case 27:b="",this.cancel(a,!0);break;case 37:if(this.applicationCursor){b="OD";break}b="[D";break;case 39:if(this.applicationCursor){b="OC";break}b="[C";break;case 38:if(this.applicationCursor){b="OA";break}if(a.ctrlKey)return this.scrollDisp(-1),this.cancel(a);b="[A";break;case 40:if(this.applicationCursor){b="OB";break}if(a.ctrlKey)return this.scrollDisp(1),this.cancel(a);b="[B";break;case 46:b="[3~";break;case 45:b="[2~";break;case 36:if(this.applicationKeypad){b="OH";break}b="OH";break;case 35:if(this.applicationKeypad){b="OF";break}b="OF";break;case 33:if(a.shiftKey)return this.scrollDisp(-(this.rows-1)),this.cancel(a);b="[5~";break;case 34:if(a.shiftKey)return this.scrollDisp(this.rows-1),this.cancel(a);b="[6~";break;case 112:b="OP";break;case 113:b="OQ";break;case 114:b="OR";break;case 115:b="OS";break;case 116:b="[15~";break;case 117:b="[17~";break;case 118:b="[18~";break;case 119:b="[19~";break;case 120:b="[20~";break;case 121:b="[21~";break;case 122:b="[23~";break;case 123:b="[24~";break;default:a.ctrlKey?a.keyCode>=65&&a.keyCode<=90?b=t.fromCharCode(a.keyCode-64):32===a.keyCode?b=t.fromCharCode(0):a.keyCode>=51&&a.keyCode<=55?b=t.fromCharCode(a.keyCode-51+27):56===a.keyCode?b=t.fromCharCode(127):219===a.keyCode?b=t.fromCharCode(27):221===a.keyCode&&(b=t.fromCharCode(29)):(!this.isMac&&a.altKey||this.isMac&&a.metaKey)&&(a.keyCode>=65&&a.keyCode<=90?b=""+t.fromCharCode(a.keyCode+32):192===a.keyCode?b="`":a.keyCode>=48&&a.keyCode<=57&&(b=""+(a.keyCode-48)))}return!b||this.isMac&&a.metaKey?!0:(this.emit("keydown",a),this.emit("key",b,a),this.showCursor(),this.handler(b),this.cancel(a))},b.prototype.setgLevel=function(a){this.glevel=a,this.charset=this.charsets[a]},b.prototype.setgCharset=function(a,b){this.charsets[a]=b,this.glevel===a&&(this.charset=b)},b.prototype.keyPress=function(a){var b;if(this.cancel(a),a.charCode)b=a.charCode;else if(null==a.which)b=a.keyCode;else{if(0===a.which||0===a.charCode)return!1;b=a.which}return!b||a.ctrlKey||a.altKey||a.metaKey?!1:(b=t.fromCharCode(b),this.emit("keypress",b,a),this.emit("key",b,a),this.showCursor(),this.handler(b),!1)},b.prototype.send=function(a){var b=this;this.queue||u(function(){b.handler(b.queue),b.queue=""},1),this.queue+=a},b.prototype.bell=function(){if(this.visualBell){var a=this;this.element.style.borderColor="white",u(function(){a.element.style.borderColor=""},10),this.popOnBell&&this.focus()}},b.prototype.log=function(){if(this.debug&&this.context.console&&this.context.console.log){var a=Array.prototype.slice.call(arguments);this.context.console.log.apply(this.context.console,a)}},b.prototype.error=function(){if(this.debug&&this.context.console&&this.context.console.error){var a=Array.prototype.slice.call(arguments);this.context.console.error.apply(this.context.console,a)}},b.prototype.resize=function(a,b){var c,d,e,f;if(1>a&&(a=1),1>b&&(b=1),e=this.cols,a>e)for(f=[this.defAttr," "],d=this.lines.length;d--;)for(;this.lines[d].length<a;)this.lines[d].push(f);else if(e>a)for(d=this.lines.length;d--;)for(;this.lines[d].length>a;)this.lines[d].pop();if(this.setupStops(e),this.cols=a,e=this.rows,b>e)for(c=this.element;e++<b;)this.lines.length<b+this.ybase&&this.lines.push(this.blankLine()),this.children.length<b&&this.insertRow();else if(e>b)for(;e-->b;)if(this.lines.length>b+this.ybase&&this.lines.pop(),this.children.length>b){if(c=this.children.pop(),!c)continue;c.parentNode.removeChild(c)}this.rows=b,this.y>=b&&(this.y=b-1),this.x>=a&&(this.x=a-1),this.scrollTop=0,this.scrollBottom=b-1,this.refresh(0,this.rows-1),this.normal=null,this.emit("resize",{terminal:this,cols:a,rows:b})},b.prototype.fit=function(){var a,b,c=this.element.parentElement,d=this.rowContainer.firstElementChild,e=parseInt(c.offsetHeight/d.offsetHeight);d.style.display="inline",a=parseInt(d.offsetWidth/this.cols),d.style.display="",b=parseInt(c.offsetWidth/a),this.resize(b,e)},b.prototype.updateRange=function(a){a<this.refreshStart&&(this.refreshStart=a),a>this.refreshEnd&&(this.refreshEnd=a)},b.prototype.maxRange=function(){this.refreshStart=0,this.refreshEnd=this.rows-1},b.prototype.setupStops=function(a){for(null!=a?this.tabs[a]||(a=this.prevStop(a)):(this.tabs={},a=0);a<this.cols;a+=8)this.tabs[a]=!0},b.prototype.prevStop=function(a){for(null==a&&(a=this.x);!this.tabs[--a]&&a>0;);return a>=this.cols?this.cols-1:0>a?0:a},b.prototype.nextStop=function(a){for(null==a&&(a=this.x);!this.tabs[++a]&&a<this.cols;);return a>=this.cols?this.cols-1:0>a?0:a},b.prototype.eraseRight=function(a,b){for(var c=this.lines[this.ybase+b],d=[this.eraseAttr()," "];a<this.cols;a++)c[a]=d;this.updateRange(b)},b.prototype.eraseLeft=function(a,b){var c=this.lines[this.ybase+b],d=[this.eraseAttr()," "];for(a++;a--;)c[a]=d;this.updateRange(b)},b.prototype.eraseLine=function(a){this.eraseRight(0,a)},b.prototype.blankLine=function(a){for(var b=a?this.eraseAttr():this.defAttr,c=[b," "],d=[],e=0;e<this.cols;e++)d[e]=c;return d},b.prototype.ch=function(a){return a?[this.eraseAttr()," "]:[this.defAttr," "]},b.prototype.is=function(a){var b=this.termName;return 0===(b+"").indexOf(a)},b.prototype.handler=function(a){this.emit("data",a)},b.prototype.handleTitle=function(a){this.emit("title",a)},b.prototype.index=function(){this.y++,this.y>this.scrollBottom&&(this.y--,this.scroll()),this.state=m},b.prototype.reverseIndex=function(){var a;this.y--,this.y<this.scrollTop&&(this.y++,this.lines.splice(this.y+this.ybase,0,this.blankLine(!0)),a=this.rows-1-this.scrollBottom,this.lines.splice(this.rows-1+this.ybase-a+1,1),this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)),this.state=m},b.prototype.reset=function(){this.options.rows=this.rows,this.options.cols=this.cols,b.call(this,this.options),this.refresh(0,this.rows-1)},b.prototype.tabSet=function(){this.tabs[this.x]=!0,this.state=m},b.prototype.cursorUp=function(a){var b=a[0];1>b&&(b=1),this.y-=b,this.y<0&&(this.y=0)},b.prototype.cursorDown=function(a){var b=a[0];1>b&&(b=1),this.y+=b,this.y>=this.rows&&(this.y=this.rows-1)},b.prototype.cursorForward=function(a){var b=a[0];1>b&&(b=1),this.x+=b,this.x>=this.cols&&(this.x=this.cols-1)},b.prototype.cursorBackward=function(a){var b=a[0];1>b&&(b=1),this.x-=b,this.x<0&&(this.x=0)},b.prototype.cursorPos=function(a){var b,c;b=a[0]-1,c=a.length>=2?a[1]-1:0,0>b?b=0:b>=this.rows&&(b=this.rows-1),0>c?c=0:c>=this.cols&&(c=this.cols-1),this.x=c,this.y=b},b.prototype.eraseInDisplay=function(a){var b;switch(a[0]){case 0:for(this.eraseRight(this.x,this.y),b=this.y+1;b<this.rows;b++)this.eraseLine(b);break;case 1:for(this.eraseLeft(this.x,this.y),b=this.y;b--;)this.eraseLine(b);break;case 2:for(b=this.rows;b--;)this.eraseLine(b);break;case 3:}},b.prototype.eraseInLine=function(a){switch(a[0]){case 0:this.eraseRight(this.x,this.y);break;case 1:this.eraseLeft(this.x,this.y);break;case 2:this.eraseLine(this.y)}},b.prototype.charAttributes=function(a){if(1===a.length&&0===a[0])return void(this.curAttr=this.defAttr);for(var b,c=a.length,d=0,e=this.curAttr>>18,f=this.curAttr>>9&511,g=511&this.curAttr;c>d;d++)b=a[d],b>=30&&37>=b?f=b-30:b>=40&&47>=b?g=b-40:b>=90&&97>=b?(b+=8,f=b-90):b>=100&&107>=b?(b+=8,g=b-100):0===b?(e=this.defAttr>>18,f=this.defAttr>>9&511,g=511&this.defAttr):1===b?e|=1:4===b?e|=2:5===b?e|=4:7===b?e|=8:8===b?e|=16:22===b?e&=-2:24===b?e&=-3:25===b?e&=-5:27===b?e&=-9:28===b?e&=-17:39===b?f=this.defAttr>>9&511:49===b?g=511&this.defAttr:38===b?2===a[d+1]?(d+=2,f=i(255&a[d],255&a[d+1],255&a[d+2]),-1===f&&(f=511),d+=2):5===a[d+1]&&(d+=2,b=255&a[d],f=b):48===b?2===a[d+1]?(d+=2,g=i(255&a[d],255&a[d+1],255&a[d+2]),-1===g&&(g=511),d+=2):5===a[d+1]&&(d+=2,b=255&a[d],g=b):100===b?(f=this.defAttr>>9&511,g=511&this.defAttr):this.error("Unknown SGR attribute: %d.",b);this.curAttr=e<<18|f<<9|g},b.prototype.deviceStatus=function(a){if(this.prefix){if("?"===this.prefix)switch(a[0]){case 6:this.send("[?"+(this.y+1)+";"+(this.x+1)+"R");break;case 15:break;case 25:break;case 26:break;case 53:}}else switch(a[0]){case 5:this.send("[0n");break;case 6:this.send("["+(this.y+1)+";"+(this.x+1)+"R")}},b.prototype.insertChars=function(a){var b,c,d,e;for(b=a[0],1>b&&(b=1),c=this.y+this.ybase,d=this.x,e=[this.eraseAttr()," "];b--&&d<this.cols;)this.lines[c].splice(d++,0,e),this.lines[c].pop()},b.prototype.cursorNextLine=function(a){var b=a[0];1>b&&(b=1),this.y+=b,this.y>=this.rows&&(this.y=this.rows-1),this.x=0},b.prototype.cursorPrecedingLine=function(a){var b=a[0];1>b&&(b=1),this.y-=b,this.y<0&&(this.y=0),this.x=0},b.prototype.cursorCharAbsolute=function(a){var b=a[0];1>b&&(b=1),this.x=b-1},b.prototype.insertLines=function(a){var b,c,d;for(b=a[0],1>b&&(b=1),c=this.y+this.ybase,d=this.rows-1-this.scrollBottom,d=this.rows-1+this.ybase-d+1;b--;)this.lines.splice(c,0,this.blankLine(!0)),this.lines.splice(d,1);this.updateRange(this.y),this.updateRange(this.scrollBottom)},b.prototype.deleteLines=function(a){var b,c,d;for(b=a[0],1>b&&(b=1),c=this.y+this.ybase,d=this.rows-1-this.scrollBottom,d=this.rows-1+this.ybase-d;b--;)this.lines.splice(d+1,0,this.blankLine(!0)),this.lines.splice(c,1);this.updateRange(this.y),this.updateRange(this.scrollBottom)},b.prototype.deleteChars=function(a){var b,c,d;for(b=a[0],1>b&&(b=1),c=this.y+this.ybase,d=[this.eraseAttr()," "];b--;)this.lines[c].splice(this.x,1),this.lines[c].push(d)},b.prototype.eraseChars=function(a){var b,c,d,e;for(b=a[0],1>b&&(b=1),c=this.y+this.ybase,d=this.x,e=[this.eraseAttr()," "];b--&&d<this.cols;)this.lines[c][d++]=e},b.prototype.charPosAbsolute=function(a){var b=a[0];1>b&&(b=1),this.x=b-1,this.x>=this.cols&&(this.x=this.cols-1)},b.prototype.HPositionRelative=function(a){var b=a[0];1>b&&(b=1),this.x+=b,this.x>=this.cols&&(this.x=this.cols-1)},b.prototype.sendDeviceAttributes=function(a){a[0]>0||(this.prefix?">"===this.prefix&&(this.is("xterm")?this.send("[>0;276;0c"):this.is("rxvt-unicode")?this.send("[>85;95;0c"):this.is("linux")?this.send(a[0]+"c"):this.is("screen")&&this.send("[>83;40003;0c")):this.is("xterm")||this.is("rxvt-unicode")||this.is("screen")?this.send("[?1;2c"):this.is("linux")&&this.send("[?6c"))},b.prototype.linePosAbsolute=function(a){var b=a[0];1>b&&(b=1),this.y=b-1,this.y>=this.rows&&(this.y=this.rows-1)},b.prototype.VPositionRelative=function(a){var b=a[0];1>b&&(b=1),this.y+=b,this.y>=this.rows&&(this.y=this.rows-1)},b.prototype.HVPosition=function(a){a[0]<1&&(a[0]=1),a[1]<1&&(a[1]=1),this.y=a[0]-1,this.y>=this.rows&&(this.y=this.rows-1),this.x=a[1]-1,this.x>=this.cols&&(this.x=this.cols-1)},b.prototype.setMode=function(a){if("object"!=typeof a)if(this.prefix){if("?"===this.prefix)switch(a){case 1:this.applicationCursor=!0;break;case 2:this.setgCharset(0,b.charsets.US),this.setgCharset(1,b.charsets.US),this.setgCharset(2,b.charsets.US),this.setgCharset(3,b.charsets.US);break;case 3:this.savedCols=this.cols,this.resize(132,this.rows);break;case 6:this.originMode=!0;break;case 7:this.wraparoundMode=!0;break;case 12:break;case 66:this.log("Serial port requested application keypad."),this.applicationKeypad=!0;break;case 9:case 1e3:case 1002:case 1003:this.x10Mouse=9===a,this.vt200Mouse=1e3===a,this.normalMouse=a>1e3,this.mouseEvents=!0,this.element.style.cursor="default",this.log("Binding to mouse events.");break;case 1004:this.sendFocus=!0;break;case 1005:this.utfMouse=!0;break;case 1006:this.sgrMouse=!0;break;case 1015:this.urxvtMouse=!0;break;case 25:this.cursorHidden=!1;break;case 1049:case 47:case 1047:if(!this.normal){var c={lines:this.lines,ybase:this.ybase,ydisp:this.ydisp,x:this.x,y:this.y,scrollTop:this.scrollTop,scrollBottom:this.scrollBottom,tabs:this.tabs};this.reset(),this.normal=c,this.showCursor()}}}else switch(a){case 4:this.insertMode=!0;break;case 20:}else for(var d=a.length,e=0;d>e;e++)this.setMode(a[e])},b.prototype.resetMode=function(a){if("object"!=typeof a)if(this.prefix){if("?"===this.prefix)switch(a){case 1:this.applicationCursor=!1;break;case 3:132===this.cols&&this.savedCols&&this.resize(this.savedCols,this.rows),delete this.savedCols;break;case 6:this.originMode=!1;break;case 7:this.wraparoundMode=!1;break;case 12:break;case 66:this.log("Switching back to normal keypad."),this.applicationKeypad=!1;break;case 9:case 1e3:case 1002:case 1003:this.x10Mouse=!1,this.vt200Mouse=!1,this.normalMouse=!1,this.mouseEvents=!1,this.element.style.cursor="";break;case 1004:this.sendFocus=!1;break;case 1005:this.utfMouse=!1;break;case 1006:this.sgrMouse=!1;break;case 1015:this.urxvtMouse=!1;break;case 25:this.cursorHidden=!0;break;case 1049:case 47:case 1047:this.normal&&(this.lines=this.normal.lines,this.ybase=this.normal.ybase,this.ydisp=this.normal.ydisp,this.x=this.normal.x,this.y=this.normal.y,this.scrollTop=this.normal.scrollTop,this.scrollBottom=this.normal.scrollBottom,this.tabs=this.normal.tabs,this.normal=null,this.refresh(0,this.rows-1),this.showCursor())}}else switch(a){case 4:this.insertMode=!1;break;case 20:}else for(var b=a.length,c=0;b>c;c++)this.resetMode(a[c])},b.prototype.setScrollRegion=function(a){this.prefix||(this.scrollTop=(a[0]||1)-1,this.scrollBottom=(a[1]||this.rows)-1,this.x=0,this.y=0)},b.prototype.saveCursor=function(){this.savedX=this.x,this.savedY=this.y},b.prototype.restoreCursor=function(){this.x=this.savedX||0,this.y=this.savedY||0},b.prototype.cursorForwardTab=function(a){for(var b=a[0]||1;b--;)this.x=this.nextStop()},b.prototype.scrollUp=function(a){for(var b=a[0]||1;b--;)this.lines.splice(this.ybase+this.scrollTop,1),this.lines.splice(this.ybase+this.scrollBottom,0,this.blankLine());this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)},b.prototype.scrollDown=function(a){for(var b=a[0]||1;b--;)this.lines.splice(this.ybase+this.scrollBottom,1),this.lines.splice(this.ybase+this.scrollTop,0,this.blankLine());this.updateRange(this.scrollTop),this.updateRange(this.scrollBottom)},b.prototype.initMouseTracking=function(){},b.prototype.resetTitleModes=function(){},b.prototype.cursorBackwardTab=function(a){for(var b=a[0]||1;b--;)this.x=this.prevStop()},b.prototype.repeatPrecedingCharacter=function(a){for(var b=a[0]||1,c=this.lines[this.ybase+this.y],d=c[this.x-1]||[this.defAttr," "];b--;)c[this.x++]=d},b.prototype.tabClear=function(a){var b=a[0];0>=b?delete this.tabs[this.x]:3===b&&(this.tabs={})},b.prototype.mediaCopy=function(){},b.prototype.setResources=function(){},b.prototype.disableModifiers=function(){},b.prototype.setPointerMode=function(){},b.prototype.softReset=function(){this.cursorHidden=!1,this.insertMode=!1,this.originMode=!1,this.wraparoundMode=!1,this.applicationKeypad=!1,this.applicationCursor=!1,this.scrollTop=0,this.scrollBottom=this.rows-1,this.curAttr=this.defAttr,this.x=this.y=0,this.charset=null,this.glevel=0,this.charsets=[null]},b.prototype.requestAnsiMode=function(){},b.prototype.requestPrivateMode=function(){},b.prototype.setConformanceLevel=function(){},b.prototype.loadLEDs=function(){},b.prototype.setCursorStyle=function(){},b.prototype.setCharProtectionAttr=function(){},b.prototype.restorePrivateValues=function(){},b.prototype.setAttrInRectangle=function(a){for(var b,c,d=a[0],e=a[1],f=a[2],g=a[3],h=a[4];f+1>d;d++)for(b=this.lines[this.ybase+d],c=e;g>c;c++)b[c]=[h,b[c][1]];this.updateRange(a[0]),this.updateRange(a[2])},b.prototype.fillRectangle=function(a){for(var b,c,d=a[0],e=a[1],f=a[2],g=a[3],h=a[4];g+1>e;e++)for(b=this.lines[this.ybase+e],c=f;h>c;c++)b[c]=[b[c][0],t.fromCharCode(d)];this.updateRange(a[1]),this.updateRange(a[3])},b.prototype.enableLocatorReporting=function(a){a[0]>0},b.prototype.eraseRectangle=function(a){var b,c,d,e=a[0],f=a[1],g=a[2],h=a[3];for(d=[this.eraseAttr()," "];g+1>e;e++)for(b=this.lines[this.ybase+e],c=f;h>c;c++)b[c]=d;this.updateRange(a[0]),this.updateRange(a[2])},b.prototype.insertColumns=function(){for(var a,b=params[0],c=this.ybase+this.rows,d=[this.eraseAttr()," "];b--;)for(a=this.ybase;c>a;a++)this.lines[a].splice(this.x+1,0,d),this.lines[a].pop();this.maxRange()},b.prototype.deleteColumns=function(){for(var a,b=params[0],c=this.ybase+this.rows,d=[this.eraseAttr()," "];b--;)for(a=this.ybase;c>a;a++)this.lines[a].splice(this.x,1),this.lines[a].push(d);this.maxRange()},b.prototype.copyBuffer=function(a){for(var a=a||this.lines,b=[],c=0;c<a.length;c++){b[c]=[];for(var d=0;d<a[c].length;d++)b[c][d]=[a[c][d][0],a[c][d][1]]}return b},b.prototype.getCopyTextarea=function(){var a=this._copyTextarea,b=this.document;return a||(a=b.createElement("textarea"),a.style.position="absolute",a.style.left="-32000px",a.style.top="-32000px",a.style.width="0px",a.style.height="0px",a.style.opacity="0",a.style.backgroundColor="transparent",a.style.borderStyle="none",a.style.outlineStyle="none",b.getElementsByTagName("body")[0].appendChild(a),this._copyTextarea=a),a
},b.prototype.copyText=function(a){var b=this,c=this.getCopyTextarea();this.emit("copy",a),c.focus(),c.textContent=a,c.value=a,c.setSelectionRange(0,a.length),u(function(){b.element.focus(),b.focus()},1)},b.prototype.keyPrefix=function(a,b){"k"===b||"&"===b?this.destroy():"p"===b||"]"===b?this.emit("request paste"):"c"===b?this.emit("request create"):b>="0"&&"9">=b?(b=+b-1,~b||(b=9),this.emit("request term",b)):"n"===b?this.emit("request term next"):"P"===b?this.emit("request term previous"):":"===b&&this.emit("request command mode")},b.prototype.keySelect=function(a,b){if(this.showCursor(),""===b){var c=this.ydisp+this.y;return void(this.ydisp===this.ybase?(this.y=Math.min(this.y+(this.rows-1)/2|0,this.rows-1),this.refresh(0,this.rows-1)):this.scrollDisp((this.rows-1)/2|0))}if(""===b){var c=this.ydisp+this.y;return void(0===this.ydisp?(this.y=Math.max(this.y-(this.rows-1)/2|0,0),this.refresh(0,this.rows-1)):this.scrollDisp(-(this.rows-1)/2|0))}if(""===b){var c=this.ydisp+this.y;return void this.scrollDisp(this.rows-1)}if(""===b){var c=this.ydisp+this.y;return void this.scrollDisp(-(this.rows-1))}if("k"===b||"[A"===b){var c=this.ydisp+this.y;return this.y--,this.y<0&&(this.y=0,this.scrollDisp(-1)),void this.refresh(this.y,this.y+1)}if("j"===b||"[B"===b){var c=this.ydisp+this.y;return this.y++,this.y>=this.rows&&(this.y=this.rows-1,this.scrollDisp(1)),void this.refresh(this.y-1,this.y)}if("h"===b||"[D"===b){var d=this.x;return this.x--,this.x<0&&(this.x=0),void this.refresh(this.y,this.y)}if("l"===b||"[C"===b){var d=this.x;return this.x++,this.x>=this.cols&&(this.x=this.cols-1),void this.refresh(this.y,this.y)}if("w"===b||"W"===b){for(var e=(this.x,this.y),d=(this.ydisp,this.x),c=this.y,f=this.ydisp,g=!1;;){for(var h=this.lines[f+c];d<this.cols;){if(h[d][1]<=" ")g=!0;else if(g)break;d++}if(d>=this.cols&&(d=this.cols-1),!(d===this.cols-1&&h[d][1]<=" "))break;if(d=0,++c>=this.rows&&(c--,++f>this.ybase)){f=this.ybase,d=this.x;break}}return this.x=d,this.y=c,void this.scrollDisp(-this.ydisp+f)}if("b"===b||"B"===b){for(var e=(this.x,this.y),d=(this.ydisp,this.x),c=this.y,f=this.ydisp;;){for(var h=this.lines[f+c],g=d>0&&h[d][1]>" "&&h[d-1][1]>" ";d>=0;){if(h[d][1]<=" "){if(g&&d+1<this.cols&&h[d+1][1]>" "){d++;break}g=!0}d--}if(0>d&&(d=0),0!==d||!(h[d][1]<=" ")&&g)break;if(d=this.cols-1,--c<0&&(c++,--f<0)){f++,d=0;break}}return this.x=d,this.y=c,void this.scrollDisp(-this.ydisp+f)}if("e"===b||"E"===b){var d=this.x+1,c=this.y,f=this.ydisp;for(d>=this.cols&&d--;;){for(var h=this.lines[f+c];d<this.cols&&h[d][1]<=" ";)d++;for(;d<this.cols;){if(h[d][1]<=" "&&d-1>=0&&h[d-1][1]>" "){d--;break}d++}if(d>=this.cols&&(d=this.cols-1),!(d===this.cols-1&&h[d][1]<=" "))break;if(d=0,++c>=this.rows&&(c--,++f>this.ybase)){f=this.ybase;break}}return this.x=d,this.y=c,void this.scrollDisp(-this.ydisp+f)}if("^"===b||"0"===b){{this.x}if("0"===b)this.x=0;else if("^"===b){for(var h=this.lines[this.ydisp+this.y],d=0;d<this.cols&&!(h[d][1]>" ");)d++;d>=this.cols&&(d=this.cols-1),this.x=d}return void this.refresh(this.y,this.y)}if("$"===b){for(var h=(this.x,this.lines[this.ydisp+this.y]),d=this.cols-1;d>=0;)d--;return 0>d&&(d=0),this.x=d,void this.refresh(this.y,this.y)}if("g"===b||"G"===b){{var e=(this.x,this.y);this.ydisp}return void("g"===b?(this.x=0,this.y=0,this.scrollDisp(-this.ydisp)):"G"===b&&(this.x=0,this.y=this.rows-1,this.scrollDisp(this.ybase)))}if("H"===b||"M"===b||"L"===b){var e=(this.x,this.y);return"H"===b?(this.x=0,this.y=0):"M"===b?(this.x=0,this.y=this.rows/2|0):"L"===b&&(this.x=0,this.y=this.rows-1),this.refresh(e,e),void this.refresh(this.y,this.y)}if("{"===b||"}"===b){var h,i,e=(this.x,this.y),j=(this.ydisp,!1),k=!1,l=-1,c=this.y+("{"===b?-1:1),f=this.ydisp;for("{"===b?0>c&&(c++,f>0&&f--):"}"===b&&c>=this.rows&&(c--,f<this.ybase&&f++);;){for(h=this.lines[f+c],i=0;i<this.cols;i++){if(h[i][1]>" "){-1===l&&(l=0),j=!0;break}if(i===this.cols-1){-1===l?l=1:0===l?k=!0:1===l&&j&&(k=!0);break}}if(k)break;if("{"===b){if(c--,0>c){if(c++,!(f>0))break;f--}}else if("}"===b&&(c++,c>=this.rows)){if(c--,!(f<this.ybase))break;f++}}return k||("{"===b?(c=0,f=0):"}"===b&&(c=this.rows-1,f=this.ybase)),this.x=0,this.y=c,void this.scrollDisp(-this.ydisp+f)}return!1},b.charsets={},b.charsets.SCLD={"`":"◆",a:"▒",b:"	",c:"\f",d:"\r",e:"\n",f:"°",g:"±",h:"␤",i:"",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},b.charsets.UK=null,b.charsets.US=null,b.charsets.Dutch=null,b.charsets.Finnish=null,b.charsets.French=null,b.charsets.FrenchCanadian=null,b.charsets.German=null,b.charsets.Italian=null,b.charsets.NorwegianDanish=null,b.charsets.Spanish=null,b.charsets.Swedish=null,b.charsets.Swiss=null,b.charsets.ISOLatin=null;var t=this.String,u=this.setTimeout,v=this.setInterval;i._cache={},i.distance=function(a,b,c,d,e,f){return Math.pow(30*(a-d),2)+Math.pow(59*(b-e),2)+Math.pow(11*(c-f),2)},b.EventEmitter=a,b.inherits=f,b.on=c,b.off=d,b.cancel=e,"undefined"!=typeof module?module.exports=b:this.Terminal=b}.call(function(){return this||("undefined"!=typeof window?window:global)}());var app=angular.module("KDockerWeb",["ngAnimate","ui.bootstrap","pascalprecht.translate","LocalStorageModule"]).factory("DockerHost",function(){function a(a){var b=this;return b.val={},a&&b.set(a.val||a),b}return a.prototype.keys=["name","host","port","apiver","containers","images","lastCreateImage"],a.prototype.defValue={name:"",host:"",port:4243,apiver:"",containers:[],images:[],lastCreateImage:""},a.prototype.set=function(a){var b=this;angular.forEach(b.keys,function(c){void 0!==a[c]&&a[c]!==b.defValue[c]&&(b[c]=angular.copy(a[c]))})},a.prototype.__defineGetter__("apiurl",function(){var a=this,b="";return a.host&&(b="http://"+a.host,a.port&&(b+=":"+a.port),a.apiver&&(b+="/"+a.apiver)),b}),a.prototype.__defineGetter__("valid",function(){var a=this;return!!a.apiurl}),angular.forEach(a.prototype.keys,function(b){a.prototype.__defineGetter__(b,function(){var a=this;return a.val[b]||a.defValue[b]}),a.prototype.__defineSetter__(b,function(a){var c=this;return void 0===a?void delete c.val[b]:c.val[b]=a})}),a}).factory("DockerData",["localStorageService","DockerHost",function(a,b){function c(){function c(){d.curDockerIdx=-1,d.dockerHosts=[]}var d=this;d.version="0.1.13-5",d.locales=[{id:"en",name:"English"},{id:"zh_tw",name:"正體中文"}],d.load=function(){c();var e=["curDockerIdx"];angular.forEach(e,function(b){var c=a.get(b);void 0!==c&&null!==c&&(d[b]=""+c)});var e=["dockerHosts"];angular.forEach(e,function(c){var e=a.get(c);void 0!==e&&null!==e&&(d[c]=[],angular.forEach(e,function(a){d[c].push(new b(a))}))})},d.load(),d.save=function(){var b="curDockerIdx";d[b]>=0?a.set(b,d[b]):a.remove(b),b="dockerHosts",d[b]&&d[b].length?a.set(b,d[b]):a.remove(b)},d.reset=function(){a.clearAll(),c()},d.getApiUrl=function(a){if(a=a||d,!a.host)return"";var b="http://"+a.host+":"+a.port;return a.apiver&&(b+="/"+a.apiver),b},d.__defineGetter__("dockerHost",function(){var a=this;if(a.curDockerIdx>=0){if(a.dockerHosts[a.curDockerIdx])return a.dockerHosts[a.curDockerIdx];if(a.dockerHosts[0])return a.curDockerIdx=0,a.dockerHosts[a.curDockerIdx]}return new b})}return new c}]).run(["$rootScope","DockerData","$timeout",function(a,b,c){function d(){e||(e=!0,c(function(){b.save(),e=!1},500))}a.DockerData=b;var e=!1;a.$watch("DockerData.curDockerIdx",d),a.$watchCollection("DockerData.dockerHost",d),a.$watchCollection("DockerData.dockerHosts",d)}]).provider("LocationHash",function(){function a(){var a=this;a.autobind={tab:{init:"Containers"}},a.getCurMinObj=function(){var b={},c=!0;return angular.forEach(a.autobind,function(d,e){void 0!==a.autobind[e].value&&(b[e]=a.autobind[e].value,c=!1)}),c?null:b},angular.forEach(a.autobind,function(b,c){void 0!==a[c]&&a[c]!==a.autobind[c].init&&(a.autobind[c].value=a[c]),a.__defineGetter__(c,function(){return void 0===a.autobind[c].value?angular.copy(a.autobind[c].init):a.autobind[c].value}),a.__defineSetter__(c,function(b){a.autobind[c].init===b||void 0===b?delete a.autobind[c].value:a.autobind[c].value=b;var d=a.getCurMinObj();location.hash=d?JSON.stringify(d):""})});try{var b=location.hash.replace(/^#/,""),c=JSON.parse(b);angular.forEach(a.autobind,function(b,d){a[d]=c[d]})}catch(d){}}this.$get=function(){return new a}}).config(["$httpProvider",function(a){a.interceptors.push(["$q","DockerData","$filter",function(a,b,c){return{responseError:function(d){return b.IndexCtrl&&d.config.errmsg&&b.IndexCtrl.error("["+d.status+"]",c("translate")(d.config.errmsg),d.data?":":"",d.data),a.reject(d)}}}])}]);app.config(["$translateProvider",function(a){a.translations("zh_tw",{OK:"確定",Cancel:"取消",Close:"關閉",Config:"設定",Description:"說明",Status:"狀態",Create:"建立",Action:"操作",Attach:"連線",Start:"啟動",Stop:"停止",Remove:"刪除",Reset:"重設","Port Type":"類型","More options":"更多設定","Init start config":"初始化設定參數","Get container list failed":"無法取得 Container 列表","Get image list failed":"無法取得 Image 列表","Create container failed":"無法建立 Container","Start container failed":"無法啟動 Container","Stop container failed":"無法停止 Container","Remove container failed":"無法刪除 Container","Remove image failed":"無法刪除 Image","Disconnect to docker web service.":"與 Docker 連線中斷。","Please check network and refresh page.":"請檢查網路連線並重新整理此網頁。","WebSocket connected: {{url}}":"WebSocket 已連線: {{url}}","WebSocket error: {{url}}":"WebSocket 錯誤: {{url}}","WebSocket closed: {{url}}":"WebSocket 已中斷: {{url}}","Press [SHIFT] to reload container list too.":"按住 [SHIFT] 鍵可同時更新 Container 列表","Press [SHIFT] to reload image list too.":"按住 [SHIFT] 鍵可同時更新 Image 列表","Press [SHIFT] to load full logs.":"按住 [SHIFT] 鍵可載入完整紀錄",Size:"大小","Create Time":"建立時間",Nickname:"名稱","API Version":"API 版本","Tips:":"小提示：","If you connect to docker remote api failed, try the following steps:":"如果您連線到 Docker Remote API 時出現問題，請嘗試下列步驟：","Check docker remote api port is opened, and not blocked by firewall.":"檢查 Docker Remote API 的 Port 是否開啟，並檢查防火牆的設定。","Downgrade the api version, like v1.9, v1.8...etc, or keep empty.":"試著將 API 的版本降低，例如 v1.9 或是 v1.8 ，也可以試著留空。","Click Reset button and try again.":"點擊重設按鈕，再設定一次。",Readonly:"唯讀",Pause:"暫停",Resume:"繼續",Copy:"複製"});var b={};angular.forEach(a.translations("zh_tw"),function(a,c){c.match(/{{.*}}/)&&(b[c]=c)}),a.translations("en",b).registerAvailableLanguageKeys(["en","zh_tw"],{en_us:"en",en_uk:"en",zh_cn:"zh_tw",zh_hk:"zh_tw"}).useStorage("localStorageService").determinePreferredLanguage()}]),app.controller("dockerContainersCtrl",function(){}).directive("dockerContainers",["$filter","$http","DockerData","$modal","$rootScope",function(a,b,c,d,e){return{restrict:"E",templateUrl:"directives/dockerContainers.html",link:function(f){var g=f;g.DockerData=c,c.ContainerCtrl=g,g.tabs=[],g.curtab=null,g.predicate="",g.reverse=!1,g.sortConfig=function(a){g.predicate===a?g.reverse=!g.reverse:(g.predicate=a,g.reverse=!1)},g.reload=function(a){c.dockerHost.valid&&(g.loadingCtrl.container=!0,g.predicate="",g.reverse=!1,a&&a.shiftKey&&e.$emit("reload-image"),b.get(c.dockerHost.apiurl+"/containers/json?all=1",{errmsg:"Get container list failed"}).success(function(a){angular.forEach(a,function(a){a.name=a.Names.join().substr(1),a.running=!!a.Status.match(/^Up /),a.paused=!!a.Status.match(/Paused/)}),g.DockerData.dockerHost.containers=a||[],g.loadingCtrl.container=!1}).error(function(){g.loadingCtrl.container=!1}))},g.checkReload=function(){g.DockerData.dockerHost.containers.length||g.reload()},g.attach=function(a,b){if(g.curtab=b,b){for(var c=0;c<g.tabs.length;c++){var d=g.tabs[c];if(b.Id===d.Id)return}g.tabs.unshift(b),b.terminal||(b.terminal=new Terminal,b.terminal.on("key",function(a,b){if(b){if(b.ctrlKey)switch(b.keyCode){case 67:case 86:break;default:b.preventDefault()}if(b.shiftKey)switch(b.keyCode){case 45:break;default:b.preventDefault()}}}),g.setupWebsocket(a,b))}},g.start=function(a,d){b.post(c.dockerHost.apiurl+"/containers/"+a.Id+"/start",d,{errmsg:"Start container failed"}).success(function(){g.reload()})},g.stop=function(a){b.post(c.dockerHost.apiurl+"/containers/"+a.Id+"/stop",{},{errmsg:"Stop container failed"}).success(function(){g.reload()})},g.remove=function(a){b.delete(c.dockerHost.apiurl+"/containers/"+a.Id+"?v=1&force=1",{errmsg:"Remove container failed"}).success(function(){g.reload()})},g.pause=function(a){b.post(c.dockerHost.apiurl+"/containers/"+a.Id+"/pause",{},{errmsg:"Pause container failed"}).success(function(){g.reload()})},g.unpause=function(a){b.post(c.dockerHost.apiurl+"/containers/"+a.Id+"/unpause",{},{errmsg:"Unpause container failed"}).success(function(){g.reload()})},g.setupWebsocket=function(b,d){return document.getElementById(d.Id+"_terminal")?(d.terminal.open(document.getElementById(d.Id+"_terminal")),b.shiftKey,d.websocket=new WebSocket(c.dockerHost.apiurl.replace(/^http/,"ws")+"/containers/"+d.Id+"/attach/ws?stderr=1&stdout=1&stream=1&stdin=1"+(b.shiftKey?"&logs=1":"&logs=0")),d.websocket.onopen=function(b){d.terminal.write(a("translate")("WebSocket connected: {{url}}",{url:b.target.URL}))},d.websocket.onerror=function(b){d.terminal.write(a("translate")("WebSocket error: {{url}}",{url:b.target.URL}))},d.websocket.onclose=function(b){d.terminal.write(a("translate")("WebSocket closed: {{url}}",{url:b.target.URL})),d.terminal.destroy(),delete d.terminal,delete d.websocket,g.closeContainer(d)},d.websocket.onmessage=function(a){d.terminal.write(a.data)},void d.terminal.on("data",function(a){d.websocket.send(a)})):void setTimeout(function(){g.setupWebsocket(b,d)},500)},g.openCreateContainerModal=function(){d.open({templateUrl:"index/CreateContainerModalContent.html",controller:"CreateContainerModalCtrl"}).result.then(function(a){var d="";a.param.Name&&(d="?name="+a.param.Name),b.post(c.dockerHost.apiurl+"/containers/create"+d,a.param,{errmsg:"Create container failed"}).success(function(b){g.start(b,a.startconfig)})})},g.openStartContainerModal=function(a){d.open({templateUrl:"index/StartContainerModalContent.html",controller:"StartContainerModalCtrl",resolve:{container:function(){return a}}}).result.then(function(a){g.start(a.container,a.param)})},g.openInspectContainerModal=function(a){b.get(c.dockerHost.apiurl+"/containers/"+a.Id+"/json",{},{errmsg:"Inspect container failed"}).success(function(a){d.open({templateUrl:"index/InspectContainerModalContent.html",controller:"InspectContainerModalCtrl",size:"lg",resolve:{inspect:function(){return a}}})})},g.closeContainer=function(a){for(var b=0;b<g.tabs.length;b++)if(a.Id===g.tabs[b].Id){var c=g.tabs.splice(b,1)[0];return c.websocket&&c.websocket.close(),void(g.curtab=null)}},e.$on("reload-container",function(){g.reload()}),g.$watch("DockerData.IndexCtrl.tab",function(a){"Containers"==a&&g.checkReload()}),g.reload()}}}]),app.controller("dockerHostConfigCtrl",function(){}).directive("dockerHostConfig",["$rootScope","DockerData","DockerHost",function(a,b,c){return{restrict:"E",templateUrl:"directives/dockerHostConfig.html",link:function(d){var e=d;e.dockerHost=new c(b.dockerHost),e.DockerData=b,b.ConfigCtrl=e,e.addDocker=function(){var a=new c(e.dockerHost);a.containers=[],a.images=[],b.dockerHosts.unshift(a)},e.delDocker=function(a){b.dockerHosts.splice(a,1)},e.setDocker=function(a){b.curDockerIdx=""+a,e.dockerHost=new c(b.dockerHost)},e.moveUp=function(a){var c=b.dockerHosts;c.splice(a-1,0,c.splice(a,1)[0])},e.moveDown=function(a){var c=b.dockerHosts;c.splice(a+1,0,c.splice(a,1)[0])},e.reset=function(){b.reset()},a.$on("ConfigCtrl.setDocker",function(a,c){b.curDockerIdx=""+c})}}}]),app.controller("dockerImagesCtrl",function(){}).directive("dockerImages",["DockerData","$http","$rootScope","$modal","$filter",function(a,b,c,d,e){return{restrict:"E",templateUrl:"directives/dockerImages.html",link:function(f){var g=f;g.DockerData=a,a.ImageCtrl=g,g.predicate="",g.reverse=!1,g.sortConfig=function(a){g.predicate===a?g.reverse=!g.reverse:(g.predicate=a,g.reverse=!1)},g.reload=function(d){a.dockerHost.valid&&(g.loadingCtrl.image=!0,g.predicate="",g.reverse=!1,d&&d.shiftKey&&c.$emit("reload-container"),b.get(a.dockerHost.apiurl+"/images/json?all=0",{errmsg:"Get image list failed"}).success(function(a){g.DockerData.dockerHost.images=a,g.loadingCtrl.image=!1}).error(function(){g.loadingCtrl.image=!1}))},g.checkReload=function(){g.DockerData.dockerHost.images.length||g.reload()},g.remove=function(c){b.delete(a.dockerHost.apiurl+"/images/"+c.Id,{errmsg:"Remove image failed"}).success(function(){g.reload()})},g.removeTag=function(c){b.delete(a.dockerHost.apiurl+"/images/"+c,{errmsg:"Remove tag failed"}).success(function(){g.reload()})},g.copyImage=function(c,d){d&&d.length&&b.get(a.dockerHost.apiurl+"/images/"+c.Id+"/get",{responseType:"blob",errmsg:"Get image blob failed"}).success(function(a){angular.forEach(d,function(d){b.post(d.apiurl+"/images/load",a,{errmsg:"Upload image blob failed"}).success(function(){b.post(d.apiurl+"/images/"+c.Id+"/tag?repo="+c.RepoTags[0],{},{errmsg:"Tag image failed"}).success(function(){d.images.splice(0),alert(e("translate")("Image copyed"))})})})})},g.openCopyImageModal=function(a){d.open({templateUrl:"index/CopyImageModalContent.html",controller:"CopyImageModalCtrl"}).result.then(function(b){g.copyImage(a,b.dockers)})},c.$on("reload-image",function(){g.reload()}),g.$watch("DockerData.IndexCtrl.tab",function(a){a in{Images:1,Containers:1}&&g.checkReload()}),g.$watch("DockerData.IndexCtrl.tab",function(a){a in{Images:1,Containers:1}&&g.checkReload()}),g.$watch("DockerData.curDockerIdx",function(){g.checkReload()}),g.reload()}}}]),app.directive("selectDocker",["DockerData",function(a){return{restrict:"E",templateUrl:"directives/selectDocker.html",link:function(b){b.DockerData=a}}}]),app.controller("CreateContainerModalCtrl",["$scope","$modalInstance","DockerData",function(a,b,c){a.DockerData=c,a.param={Name:"",Cmd:"",Hostname:"",User:"",Memory:0,MemorySwap:0,AttachStdin:!0,AttachStdout:!0,AttachStderr:!0,Tty:!0,OpenStdin:!0,StdinOnce:!1,Volumes:{},ExposedPorts:{}},a.startconfig={Binds:[],PortBindings:{},PublishAllPorts:!0,Privileged:!1,VolumesFrom:[]},a.extra={Volumes:"",VolumesFrom:"",Ports:""},a.moreOptions=!1,a.form={ExposedPorts:""},c.dockerHost.lastCreateImage?a.param.Image=c.dockerHost.lastCreateImage:c.dockerHost.images[0]&&(a.param.Image=c.dockerHost.images[0].Id),a.ok=function(){c.dockerHost.lastCreateImage=a.param.Image,c.save(),angular.forEach(a.form.ExposedPorts.split(/\s+/),function(b){b=(b||"").trim(),b&&(a.param.ExposedPorts[b]={})}),angular.forEach(a.extra.Volumes.split(/\s+/),function(b){b=(b||"").trim(),b&&(b.match(/:/)?(a.param.Volumes[b.split(/:/)[1].trim()]={},a.startconfig.Binds.push(b)):a.param.Volumes[b]={})}),a.extra.VolumesFrom&&(a.startconfig.VolumesFrom=[a.extra.VolumesFrom.trim()]),angular.forEach(a.extra.Ports.split(/\s+/),function(b){if(b=(b||"").trim())if(b.match(/:/)){var c=b.split(/:/)[0].trim(),d=b.split(/:/)[1].trim();a.startconfig.PortBindings[d]=a.startconfig.PortBindings[d]||[],a.startconfig.PortBindings[d].push({HostPort:c})}else a.startconfig.PortBindings[b]=[{}]}),b.close({param:a.param,startconfig:a.startconfig})},a.cancel=function(){b.dismiss("cancel")}}]),app.controller("StartContainerModalCtrl",["$scope","$modalInstance","DockerData","container",function(a,b,c,d){a.DockerData=c,a.param={Binds:[""],PortBindings:{},PublishAllPorts:!0,Privileged:!1,VolumesFrom:[]},a.PortBindings=[{}],a.VolumesFrom=[{}],a.ok=function(){var c=[];angular.forEach(a.param.Binds,function(a){a=(a||"").trim(),a&&c.push(a)}),a.param.Binds=c,angular.forEach(a.PortBindings,function(b){if(b.pubports=(b.pubports||"").trim(),b.priport=(b.priport||"").trim(),b.priport&&!b.priport.match(/\D/)){var c=[];b.pubports&&angular.forEach(b.pubports.split(/\D+/),function(a){c.push({HostPort:a})}),c.length||c.push({}),a.param.PortBindings[b.priport+"/"+b.porttype.toLowerCase()]=c}}),angular.forEach(a.VolumesFrom,function(b){if(b&&b.name){var c=b.name.trim();b.ro&&(c+=":ro"),a.param.VolumesFrom.push(c)}}),b.close({container:d,param:a.param})},a.cancel=function(){b.dismiss("cancel")}}]),app.directive("inspectElem",["$compile",function(a){return{restrict:"E",transclude:!0,scope:{attr:"=",name:"="},templateUrl:"index/InspectElem.html",compile:function(b,c,d){var e,f=b.contents().remove();return function(b,c){b.toVal=function(a){return JSON.stringify(a)},angular.isArray(b.attr)?angular.isObject(b.attr[0])?b.childObjArray=b.attr:b.childArray=b.attr:angular.isObject(b.attr)?b.childObject=b.attr:b.value=b.toVal(b.attr),e||(e=a(f,d)),e(b,function(a){c.append(a)})}}}}]).controller("InspectContainerModalCtrl",["$scope","$modalInstance","DockerData","inspect",function(a,b,c,d){a.DockerData=c,a.inspect=d,a.name=d.Name.replace(/^\//,""),a.close=function(){b.close({})}}]),app.controller("CopyImageModalCtrl",["$scope","$modalInstance","DockerData",function(a,b,c){a.DockerData=c,a.checkList=[],angular.forEach(c.dockerHosts,function(b){a.checkList.push({checked:!1,disabled:!(b.apiurl!==c.dockerHost.apiurl)})}),a.clickDocker=function(b){a.checkList[b].disabled||(a.checkList[b].checked=!a.checkList[b].checked)},a.ok=function(){var d=[];angular.forEach(a.checkList,function(a,b){a.checked&&d.push(c.dockerHosts[b])}),b.close({dockers:d})},a.cancel=function(){b.dismiss("cancel")}}]),app.filter("humanSize",function(){return function(a){if(0>=a)return 0;var b=["bytes","kB","MB","GB","TB","PB"],c=Math.floor(Math.log(a)/Math.log(1024));return(a/Math.pow(1024,Math.floor(c))).toFixed(2)+" "+b[c]}}).run(["$rootScope",function(a){a.loadingCtrl={}}]).controller("IndexCtrl",["$scope","DockerData","$http","$translate","LocationHash","$filter",function(a,b,c,d,e,f){a.DockerData=b,b.IndexCtrl=a,a.devMode=!1,a.locale=angular.lowercase(d.use()),a.updateLocale=function(){d.use(a.locale)},a.updateLocale(),a.alerts=[],a.log=function(){for(var b=Array.prototype.join.call(arguments," "),c=0;c<a.alerts.length;c++){var d=a.alerts[c];if("info"==d.type&&d.msg==b)return}a.alerts.push({type:"info",msg:b})},a.error=function(){for(var b=Array.prototype.join.call(arguments," "),c=0;c<a.alerts.length;c++){var d=a.alerts[c];if("danger"==d.type&&d.msg==b)return}a.alerts.push({type:"danger",msg:b})},a.connectEvents=function(){XMLHttpRequest&&b.dockerHost.apiurl&&(a.closeConnectEvents(),a.xhr=new XMLHttpRequest,a.xhr.readlen=0,a.xhr.open("GET",b.dockerHost.apiurl+"/events?since="+(Math.floor((new Date).getTime()/1e3)-30)),a.xhr.onprogress=function(){var c=a.xhr.responseText.substr(a.xhr.readlen);if(a.xhr.readlen+=c.length,c){var d=c.match(/{.*?}/g);if(d&&d.length){var e=!1,f=!1;angular.forEach(d,function(a){try{if(!e||!f){var b=JSON.parse(a);e=!!(b.status in{create:1,start:1,stop:1,kill:1,die:1,destroy:1}),f=!!(b.status in{"delete":1})}}catch(c){}}),e&&b.ContainerCtrl&&b.ContainerCtrl.reload(),f&&b.ImageCtrl&&b.ImageCtrl.reload()}}},a.xhr.onerror=function(){a.error(f("translate")("Disconnect to docker web service."),f("translate")("Please check network and refresh page.")),a.$digest()},a.xhr.send(null))},a.closeConnectEvents=function(){a.xhr&&(a.xhr.abort(),delete a.xhr)},a.checkConnectEvents=function(){XMLHttpRequest&&(a.xhr||a.connectEvents())},a.$watch("DockerData.dockerHost.apiurl",function(){a.closeConnectEvents(),a.checkConnectEvents()},!0),a.$watch("tab",function(a){e.tab=a},!0),a.tab=b.dockerHost.valid?e.tab||"Containers":"Config","0"==b.version&&(a.devMode=!0,c.get("package.json?"+(new Date).getTime()).success(function(a){b.version=a.version+"-dev"}))}]),app.run(["$templateCache",function(a){"use strict";a.put("./index/CopyImageModalContent.html",'<div class="CopyImageModal">\n	<div class="modal-header">\n		<h3 translate>Select Docker Hosts</h3>\n	</div>\n	<div class="modal-body">\n		<div class="table-responsive">\n			<table class="table table-bordered table-striped table-hover table-condensed" style="">\n				<thead>\n					<tr>\n						<th></th>\n						<th translate>Nickname</th>\n						<th translate>API Url</th>\n					</tr>\n				</thead>\n				<tbody>\n					<tr ng-repeat="dockerHost in DockerData.dockerHosts" ng-click="clickDocker($index)" ng-class="{warning: (dockerHost.apiurl == DockerData.dockerHost.apiurl)}" style="cursor: pointer;">\n						<td><input type="checkbox" ng-model="checkList[$index].checked" ng-disabled="checkList[$index].disabled"/></td>\n						<td>{{dockerHost.name}}</td>\n						<td>{{dockerHost.apiurl}}</td>\n					</tr>\n				</tbody>\n			</table>\n		</div>\n	</div>\n	<div class="modal-footer">\n		<button class="btn btn-primary" ng-click="ok()" translate>OK</button>\n		<button class="btn btn-warning" ng-click="cancel()" translate>Cancel</button>\n	</div>\n</div>\n'),a.put("./index/CreateContainerModalContent.html",'<style type="text/css">\n\n.CreateContainerModal th,\n.CreateContainerModal td {\n	padding: 0.2em 0.5em;\n}\n\n.CreateContainerModal input[type="text"] {\n	text-indent: 0.3em;\n}\n\n</style>\n\n<div class="CreateContainerModal">\n	<div class="modal-header">\n		<h3 translate>Create a container</h3>\n		<span style="position: absolute; top: 1em; right: 1em;">\n			<label for="moreOptions" translate>More options</label>\n			<input type="checkbox" ng-model="moreOptions" id="moreOptions"/>\n		</span>\n	</div>\n	<div class="modal-body">\n		<table>\n			<tr>\n				<th translate>Image</th>\n				<td>\n					<select ng-options="img.Id as img.RepoTags[0] for img in DockerData.dockerHost.images" ng-model="param.Image"></select>\n				</td>\n			</tr>\n			<tr>\n				<th translate>Name</th>\n				<td>\n					<input type="text" ng-model="param.Name" placeholder="Container name"/>\n				</td>\n			</tr>\n			<tr>\n				<th translate>Cmd</th>\n				<td>\n					<input type="text" ng-model="param.Cmd" placeholder="/bin/bash"/>\n					<button ng-click="param.Cmd = \'/bin/bash\'" class="btn btn-info btn-xs">\n						<span class="glyphicon glyphicon-arrow-left"></span>\n					</button>\n				</td>\n			</tr>\n			<tr>\n				<th translate>ExposedPorts</th>\n				<td>\n					<input type="text" ng-model="form.ExposedPorts" placeholder="22 80 8080 53/udp"/>\n				</td>\n			</tr>\n			<tr ng-repeat="key in [\'Hostname\', \'User\']" ng-show="moreOptions">\n				<th translate>{{key}}</th>\n				<td>\n					<input type="text" ng-model="param[key]"/>\n				</td>\n			</tr>\n			<tr ng-repeat="key in [\'Memory\', \'MemorySwap\']" ng-show="moreOptions">\n				<th translate>{{key}}</th>\n				<td>\n					<input type="number" ng-model="param[key]"/>\n				</td>\n			</tr>\n			<tr ng-repeat="key in [\'AttachStdin\', \'AttachStdout\', \'AttachStderr\', \'Tty\', \'OpenStdin\', \'StdinOnce\']" ng-show="moreOptions">\n				<th translate>{{key}}</th>\n				<td>\n					<input type="checkbox" ng-model="param[key]"/>\n				</td>\n			</tr>\n			<tr>\n				<td colspan="2">\n					<div style="margin-top: 1em;" translate>Init start config</div>\n				</td>\n			</tr>\n			<tr>\n				<th translate>Volumes</th>\n				<td>\n					<input type="text" ng-model="extra.Volumes" placeholder="/host/path:/container/path" style="width: 20em;"/>\n				</td>\n			</tr>\n			<tr>\n				<th translate>VolumesFrom</th>\n				<td>\n					<select ng-options="container.Names[0] as container.Names[0] for container in DockerData.dockerHost.containers" ng-model="extra.VolumesFrom">\n						<option value="">-- Container --</option>\n					</select>\n				</td>\n			</tr>\n			<tr>\n				<th translate>Ports</th>\n				<td>\n					<input type="text" ng-model="extra.Ports" placeholder="49080:80 hostPort:containerPort" style="width: 20em;"/>\n				</td>\n			</tr>\n			<tr>\n				<th translate>PublishAllPorts</th>\n				<td>\n					<input type="checkbox" ng-model="startconfig.PublishAllPorts"/>\n				</td>\n			</tr>\n			<tr ng-show="moreOptions">\n				<th translate>Privileged</th>\n				<td>\n					<input type="checkbox" ng-model="startconfig.Privileged"/>\n				</td>\n			</tr>\n		</table>\n	</div>\n	<div class="modal-footer">\n		<button class="btn btn-primary" ng-click="ok()" translate>OK</button>\n		<button class="btn btn-warning" ng-click="cancel()" translate>Cancel</button>\n	</div>\n</div>\n'),a.put("./index/InspectContainerModalContent.html",'<style type="text/css">\n\n.InspectContainerModal .inspect-elem-child-noname {\n	list-style-type: none;\n}\n\n.InspectContainerModal .inspect-elem-ul,\n.InspectContainerModal .inspect-elem-li {\n	padding-left: 1em;\n	text-indent: 0;\n}\n\n</style>\n\n<div class="InspectContainerModal">\n	<div class="modal-header">\n		<h3>Container: {{name}}</h3>\n	</div>\n	<div class="modal-body" style="overflow: auto; padding-left: 2em;">\n		<inspect-elem attr="inspect"></inspect-elem>\n	</div>\n	<div class="modal-footer">\n		<button class="btn btn-primary" ng-click="close()" translate>Close</button>\n	</div>\n</div>\n'),a.put("./index/InspectElem.html",'<div>\n	<span ng-show="name">{{name}}</span>\n	<span ng-show="(value || name) && childArray">[]</span>\n	<span ng-show="(value || name) && childObjArray">[]</span>\n	<span ng-show="(value || name) && childObject">{}</span>\n	<span ng-show="name">:</span>\n	<span ng-show="value !== undefined">{{value}}</span>\n</div>\n<ul ng-class="{\'inspect-elem-child-noname\': name && childObjArray}" class="inspect-elem-ul">\n	<li ng-repeat="child in childArray" class="inspect-elem-li">\n		<span>{{toVal(child)}}</span>\n	</li>\n	<li ng-repeat="child in childObjArray" class="inspect-elem-li">\n		<inspect-elem attr="child"></inspect-elem>\n	</li>\n	<li ng-repeat="(name,child) in childObject" class="inspect-elem-li">\n		<inspect-elem name="name" attr="child"></inspect-elem>\n	</li>\n</ul>\n'),a.put("./index/StartContainerModalContent.html",'<style type="text/css">\n\n.StartContainerModal th,\n.StartContainerModal td {\n	padding: 0.2em 0.5em;\n}\n\n.StartContainerModal th {\n	white-space: nowrap;\n}\n\n.StartContainerModal input[type=text] {\n	text-indent: 0.2em;\n}\n\n</style>\n\n<div class="StartContainerModal">\n	<div class="modal-header">\n		<h3 translate>Start a container</h3>\n	</div>\n	<div class="modal-body">\n		<table>\n			<tr>\n				<th style="vertical-align: top;">\n					<div>Binds</div>\n					<div><button ng-click="param.Binds.push(\'\')" class="btn btn-default btn-xs"><span class="glyphicon glyphicon-plus"></span></button></div>\n				</th>\n				<td>\n					<table style="width: 100%;">\n						<tr>\n							<th colspan="2">Host Path : Container Path</th>\n						</tr>\n						<tr ng-repeat="bind in param.Binds track by $index">\n							<td>\n								<input type="text" ng-model="param.Binds[$index]" placeholder="/tmp:/tmp" style="width: 100%;"/>\n							</td>\n							<td style="width: 1em;">\n								<button ng-click="param.Binds.splice($index, 1)" class="btn btn-default btn-xs"><span class="glyphicon glyphicon-remove"></span></button>\n							</td>\n						</tr>\n					</table>\n				</td>\n			</tr>\n			<tr>\n				<th style="vertical-align: top;">\n					<div>VolumesFrom</div>\n					<div><button ng-click="param.VolumesFrom.push(\'\')" class="btn btn-default btn-xs"><span class="glyphicon glyphicon-plus"></span></button></div>\n				</th>\n				<td>\n					<table style="width: 100%;">\n						<tr ng-repeat="vol in VolumesFrom">\n							<td>\n								<select ng-options="container.Names[0] as container.Names[0] for container in DockerData.dockerHost.containers" ng-model="vol.name">\n									<option value="">-- Container --</option>\n								</select>\n							</td>\n							<td style="white-space: nowrap;">\n								<label tooltip="{{\'Readonly\' | translate}}">\n									<span>RO</span>\n									<input type="checkbox" ng-model="vol.ro"/>\n								</label>\n							</td>\n							<td style="width: 100%;">\n							</td>\n							<td style="width: 1em;">\n								<button ng-click="VolumesFrom.splice($index, 1)" class="btn btn-default btn-xs"><span class="glyphicon glyphicon-remove"></span></button>\n							</td>\n						</tr>\n					</table>\n				</td>\n			</tr>\n			<tr>\n				<th style="vertical-align: top;">\n					<div>PortBindings</div>\n					<div><button ng-click="PortBindings.push({})" class="btn btn-default btn-xs"><span class="glyphicon glyphicon-plus"></span></button></div>\n				</th>\n				<td>\n					<table>\n						<tr>\n							<th translate>Port Type</th>\n							<th translate>Public Port</th>\n							<th>*<span translate>Private Port</span></th>\n						</tr>\n						<tr ng-repeat="pb in PortBindings">\n							<td>\n								<select ng-options="tp for tp in [\'TCP\', \'UDP\']" ng-model="pb.porttype" ng-init="pb.porttype=\'TCP\'"></select>\n							</td>\n							<td>\n								<input type="text" ng-model="pb.pubports" placeholder="80 8080"/>\n							</td>\n							<td>\n								<input type="text" ng-model="pb.priport" placeholder="80"/>\n							</td>\n							<td>\n								<button ng-click="PortBindings.splice($index, 1)" class="btn btn-default btn-xs"><span class="glyphicon glyphicon-remove"></span></button>\n							</td>\n						</tr>\n					</table>\n				</td>\n			</tr>\n			<tr>\n				<th>PublishAllPorts</th>\n				<td><input type="checkbox" ng-model="param.PublishAllPorts"/></td>\n			</tr>\n			<tr>\n				<th><span title="Give extended privileges to this container">Privileged</span></th>\n				<td><input type="checkbox" ng-model="param.Privileged"/></td>\n			</tr>\n		</table>\n	</div>\n	<div class="modal-footer">\n		<button class="btn btn-primary" ng-click="ok()" translate>OK</button>\n		<button class="btn btn-warning" ng-click="cancel()" translate>Cancel</button>\n	</div>\n</div>\n'),a.put("./directives/dockerContainers.html",'<div>\n	<div class="tab-header-bar">\n		<span translate>Containers</span>\n		<span>in</span>\n		<select-docker></select-docker>\n		<button ng-click="curtab=null;reload($event)" tooltip="{{\'Press [SHIFT] to reload image list too.\' | translate}}" class="btn btn-default">\n			<span ng-class="{spinner: loadingCtrl.container}" class="glyphicon glyphicon-refresh"></span>\n		</button>\n		<button ng-show="curtab" ng-click="attach()" class="btn btn-primary" translate>Back</button>\n		<span ng-repeat="c in tabs">\n			<button class="btn btn-primary" title="{{c.Id}}" ng-click="attach(c)">{{c.name}}</button>\n			<button class="btn btn-primary" ng-click="closeContainer(c)">X</button>\n		</span>\n		<button ng-click="openCreateContainerModal()" class="btn btn-info" translate>Create</button>\n	</div>\n	<div class="table-responsive" style="position: relative;">\n		<table ng-show="!curtab" class="table table-bordered table-striped table-hover table-condensed">\n			<thead>\n				<tr>\n					<th ng-click="sortConfig(\'Id\')">\n						<span translate>ID</span>\n						<span ng-show="predicate == \'Id\'" ng-class="{\'glyphicon-chevron-down\': reverse, \'glyphicon-chevron-up\': !reverse}" class="glyphicon"></span>\n					</th>\n					<th ng-click="sortConfig(\'name\')">\n						<span translate>Description</span>\n						<span ng-show="predicate == \'name\'" ng-class="{\'glyphicon-chevron-down\': reverse, \'glyphicon-chevron-up\': !reverse}" class="glyphicon"></span>\n					</th>\n					<th ng-click="sortConfig(\'Image\')">\n						<span translate>Image</span>\n						<span ng-show="predicate == \'Image\'" ng-class="{\'glyphicon-chevron-down\': reverse, \'glyphicon-chevron-up\': !reverse}" class="glyphicon"></span>\n					</th>\n					<th ng-click="sortConfig(\'Command\')">\n						<span translate>Command</span>\n						<span ng-show="predicate == \'Command\'" ng-class="{\'glyphicon-chevron-down\': reverse, \'glyphicon-chevron-up\': !reverse}" class="glyphicon"></span>\n					</th>\n					<th ng-click="sortConfig(\'Ports\')">\n						<span translate>Port</span>\n						<span ng-show="predicate == \'Ports\'" ng-class="{\'glyphicon-chevron-down\': reverse, \'glyphicon-chevron-up\': !reverse}" class="glyphicon"></span>\n					</th>\n					<th ng-click="sortConfig(\'Status\')">\n						<span translate>Status</span>\n						<span ng-show="predicate == \'Status\'" ng-class="{\'glyphicon-chevron-down\': reverse, \'glyphicon-chevron-up\': !reverse}" class="glyphicon"></span>\n					</th>\n					<th translate>Action</th>\n				</tr>\n			</thead>\n			<tbody>\n				<tr ng-repeat="c in DockerData.dockerHost.containers | orderBy:predicate:reverse" ng-class="{danger: !c.running, warning: c.paused}">\n					<td>\n						<span title="{{c.Id}}" style="white-space: nowrap;">{{c.Id.substr(0, 8)}} ...</span>\n					</td>\n					<td>\n						<span>{{c.name}}</span>\n					</td>\n					<td>\n						<span>{{c.Image}}</span>\n					</td>\n					<td>\n						<span>{{c.Command}}</span>\n					</td>\n					<td>\n						<div ng-repeat="p in c.Ports" style="white-space: nowrap;">\n							<a ng-show="p.PublicPort && p.PrivatePort" href="http://{{DockerData.dockerHost.host}}:{{p.PublicPort}}/" target="_blank">\n								<span ng-show="p.Type != \'tcp\'">{{p.Type}}: </span>{{p.PublicPort}} -&gt; {{p.PrivatePort}}\n							</a>\n							<span ng-show="!p.PublicPort || !p.PrivatePort">\n								<span ng-show="p.Type != \'tcp\'">{{p.Type}}: </span> -&gt; {{p.PublicPort}}{{p.PrivatePort}}\n							</span>\n						</div>\n					</td>\n					<td ng-click="openInspectContainerModal(c)" style="cursor: pointer;">\n						<span>{{c.Status}}</span>\n					</td>\n					<td>\n						<button ng-click="attach($event, c)" tooltip="{{\'Press [SHIFT] to load full logs.\' | translate}}" tooltip-placement="left" class="btn btn-primary btn-xs" translate>Attach</button>\n						<button ng-click="pause(c)" ng-show="c.running && !c.paused" class="btn btn-success btn-xs" translate>Pause</button>\n						<button ng-click="unpause(c)" ng-show="c.running && c.paused" class="btn btn-success btn-xs" translate>Resume</button>\n						<button ng-click="openStartContainerModal(c)" ng-show="!c.running" class="btn btn-info btn-xs" translate>Start</button>\n						<button ng-click="stop(c)" ng-show="c.running && !c.paused" class="btn btn-warning btn-xs" translate>Stop</button>\n						<button ng-click="remove(c)" ng-show="!c.paused" class="btn btn-danger btn-xs" translate>Remove</button>\n					</td>\n				</tr>\n			</tbody>\n		</table>\n		<div ng-show="loading" class="loading-block" style="width: 100%; height: 100%; position: absolute; top: 0; left: 0;"></div>\n	</div>\n	<div ng-repeat="c in tabs" id="{{c.Id}}_terminal" ng-show="curtab.Id === c.Id"></div>\n</div>\n'),a.put("./directives/dockerHostConfig.html",'<div>\n	<div class="tab-header-bar">\n		<span translate>Config</span>\n		<button ng-click="reset()" class="btn btn-primary" translate>Reset</button>\n	</div>\n	<table class="table table-hover table-condensed" style="float: left; width: auto; min-width: 20em;">\n		<tr>\n			<th translate>Nickname</th>\n			<td style="white-space: nowrap;">\n				<input type="text" placeholder="My home server" ng-model="dockerHost.name" class="form-control input-sm"/>\n			</td>\n		</tr>\n		<tr>\n			<th><span translate>Hostname</span>*</th>\n			<td>\n				<input type="text" placeholder="127.0.0.1" ng-model="dockerHost.host" class="form-control input-sm"/>\n			</td>\n		</tr>\n		<tr>\n			<th><span translate>Port</span>*</th>\n			<td>\n				<input type="number" placeholder="4243" ng-model="dockerHost.port" class="form-control input-sm"/>\n			</td>\n		</tr>\n		<tr>\n			<th translate>API Version</th>\n			<td>\n				<input type="text" placeholder="v1.13" ng-model="dockerHost.apiver" class="form-control input-sm"/>\n			</td>\n		</tr>\n		<tr>\n			<td ng-show="dockerHost.apiurl" colspan="2">\n				<span>{{dockerHost.apiurl}}</span>\n				<button ng-click="addDocker()" class="btn btn-info btn-xs" style="float: right;" translate><span class="glyphicon glyphicon-plus"></span></button>\n			</td>\n		</tr>\n	</table>\n	<div style="float: left; margin-left: 2em;">\n		<div translate>Tips:</div>\n		<div translate>If you connect to docker remote api failed, try the following steps:</div>\n		<ul>\n			<li style="list-style-type: decimal;" translate>Check docker remote api port is opened, and not blocked by firewall.</li>\n			<li style="list-style-type: decimal;" translate>Downgrade the api version, like v1.9, v1.8...etc, or keep empty.</li>\n			<li style="list-style-type: decimal;" translate>Click Reset button and try again.</li>\n		</ul>\n	</div>\n	<table ng-show="DockerData.dockerHosts.length" class="table table-bordered table-striped table-hover table-condensed" style="float: left; clear: both; margin-top: 2em; width: auto;">\n		<thead>\n			<tr>\n				<th translate>Nickname</th>\n				<th translate>API Url</th>\n				<th translate>Containers</th>\n				<th translate>Images</th>\n				<th translate>Action</th>\n			</tr>\n		</thead>\n		<tbody>\n			<tr ng-repeat="dockerHost in DockerData.dockerHosts" ng-class="{info: (DockerData.curDockerIdx == $index)}">\n				<td ng-click="setDocker($index)" style="cursor: pointer;">{{dockerHost.name}}</td>\n				<td ng-click="setDocker($index)" style="cursor: pointer;">{{dockerHost.apiurl}}</td>\n				<td ng-click="setDocker($index)" style="cursor: pointer;">{{dockerHost.containers.length}}</td>\n				<td ng-click="setDocker($index)" style="cursor: pointer;">{{dockerHost.images.length}}</td>\n				<td>\n					<button ng-click="delDocker($index)" class="btn btn-danger btn-xs" translate><span class="glyphicon glyphicon-remove"></span></button>\n					<button ng-click="moveUp($index)" ng-show="$index > 0" class="btn btn-info btn-xs" translate><span class="glyphicon glyphicon-arrow-up"></span></button>\n					<button ng-click="moveDown($index)" ng-show="!$last" class="btn btn-info btn-xs" translate><span class="glyphicon glyphicon-arrow-down"></span></button>\n				</td>\n			</tr>\n		</tbody>\n	</table>\n</div>\n'),a.put("./directives/dockerImages.html",'<div>\n	<div class="tab-header-bar">\n		<span translate>Images</span>\n		<span>in</span>\n		<select-docker></select-docker>\n		<button ng-click="reload($event)" tooltip="{{\'Press [SHIFT] to reload container list too.\' | translate}}" class="btn btn-default">\n			<span ng-class="{spinner: loadingCtrl.image}" class="glyphicon glyphicon-refresh"></span>\n		</button>\n	</div>\n	<div style="position: relative;">\n		<table class="table table-bordered table-striped table-hover table-condensed">\n			<thead>\n				<tr>\n					<th ng-click="sortConfig(\'Id\')">\n						<span translate>ID</span>\n						<span ng-show="predicate == \'Id\'" ng-class="{\'glyphicon-chevron-down\': reverse, \'glyphicon-chevron-up\': !reverse}" class="glyphicon"></span>\n					</th>\n					<th ng-click="sortConfig(\'RepoTags\')">\n						<span translate>Tags</span>\n						<span ng-show="predicate == \'RepoTags\'" ng-class="{\'glyphicon-chevron-down\': reverse, \'glyphicon-chevron-up\': !reverse}" class="glyphicon"></span>\n					</th>\n					<th ng-click="sortConfig(\'VirtualSize\')">\n						<span translate>Size</span>\n						<span ng-show="predicate == \'VirtualSize\'" ng-class="{\'glyphicon-chevron-down\': reverse, \'glyphicon-chevron-up\': !reverse}" class="glyphicon"></span>\n					</th>\n					<th ng-click="sortConfig(\'Created\')" translate translate>\n						<span translate>Create Time</span>\n						<span ng-show="predicate == \'Created\'" ng-class="{\'glyphicon-chevron-down\': reverse, \'glyphicon-chevron-up\': !reverse}" class="glyphicon"></span>\n					</th>\n					<th translate>Action</th>\n				</tr>\n			</thead>\n			<tbody>\n				<tr ng-repeat="img in DockerData.dockerHost.images | orderBy:predicate:reverse">\n					<td>\n						<span title="{{img.Id}}" style="white-space: nowrap;">{{img.Id.substr(0, 8)}} ...</span>\n					</td>\n					<td>\n						<div ng-repeat="tag in img.RepoTags">\n							<span>{{tag}}</span>\n							<button ng-click="removeTag(tag)" ng-show="img.RepoTags.length > 1" class="btn btn-danger btn-xs" translate>X</button>\n						</div>\n					</td>\n					<td>\n						<span>{{img.VirtualSize | humanSize}}</span>\n					</td>\n					<td>\n						<span>{{img.Created * 1000 | date:\'yyyy-MM-dd HH:mm\'}}</span>\n					</td>\n					<td>\n						<button ng-click="openCopyImageModal(img)" ng-show="DockerData.dockerHosts.length > 1" class="btn btn-info btn-xs" translate>Copy</button>\n						<button ng-click="remove(img)" class="btn btn-danger btn-xs" translate>Remove</button>\n					</td>\n				</tr>\n			</tbody>\n		</table>\n		<div ng-show="loading" class="loading-block" style="width: 100%; height: 100%; position: absolute; top: 0; left: 0;"></div>\n	</div>\n</div>\n'),a.put("./directives/selectDocker.html",'<span>\n	<span ng-show="!DockerData.dockerHosts.length">{{DockerData.dockerHost.name || DockerData.dockerHost.apiurl}}</span>\n	<select ng-show="DockerData.dockerHosts.length"\n		ng-options="idx as (dockerHost.name || dockerHost.apiurl) for (idx, dockerHost) in DockerData.dockerHosts"\n		ng-model="DockerData.curDockerIdx">\n	</select>\n</span>\n')
}]);